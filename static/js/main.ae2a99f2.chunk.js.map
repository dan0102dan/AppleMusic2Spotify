{"version":3,"sources":["constants/Constants.js","services/AuthService.js","services/ApiService.js","components/shared/Header.js","constants/RouteConstants.js","components/Home.js","services/AppleMusicPlaylist.js","components/apple/AppleStep3.js","components/vk/VKStep3.js","components/yandex/YandexStep3.js","components/apple/AppleStep1.js","components/apple/AppleStep2.js","services/UtilsService.js","components/apple/AppleStep4.js","components/apple/Apple.js","components/vk/VKStep1.js","components/vk/VKStep2.js","components/vk/VKStep4.js","components/vk/fetchdata.js","components/yandex/YandexStep1.js","components/yandex/YandexStep2.js","components/yandex/YandexStep4.js","components/yandex/Yandex.js","components/LoginCallback.js","components/Routes.js","App.js","index.js"],"names":["API_URL","getLoginUrl","scopes","queryArgs","push","encodeURIComponent","window","location","protocol","host","join","isLoggedIn","localStorage","getItem","getToken","axios","instance","originalAxios","create","headers","Authorization","getCurrentUser","get","getPlaylists","createPlaylist","userId","name","description","isPublic","post","addTrackToPlaylist","playlistId","uris","Header","props","state","photo","isFetchingUser","this","then","res","setState","data","images","url","display_name","catch","message","error","title","subTitle","extra","key","type","style","marginTop","marginLeft","border","borderColor","borderRadius","color","to","id","avatar","src","React","Component","withRouter","Home","removeItem","forceUpdate","className","size","background","display","margin","width","height","alignItems","justifyContent","cursor","onClick","logout","bind","href","textAlign","role","aria-label","loginMessage","axiosCancel","completed","finded","failed","AppleMusicPlaylist","settings","_playlist","changeCallbacks","spotifyStatus","searchFormat","playlist","parsed","Papa","parse","header","errors","length","Error","pop","index","track","keys","Object","includes","Name","artist","Artist","album","Album","composer","Composer","discCount","discNumber","genre","Genre","trackCount","trackNumber","year","Year","spotifyResults","spotifySelected","response","x","items","value","Date","date","getFullYear","indexes","newPlaylist","i","status","output","trackIndex","selectedIndex","findIndex","triggerChange","cb","searchTimeout","setTimeout","_search","placeholders","keyword","replace","slice","requestId","params","q","searchKeyword","limit","tracks","total","isCancel","finally","clearTimeout","cancel","success","hide","loading","AppleStep1","disabled","file","reader","FileReader","readAsText","onload","evt","text","target","result","setPlaylist","onUpload","notification","onerror","marginRight","maxWidth","beforeUpload","fileList","before","onKeyDown","e","a","str","search","split","console","log","setAppleMusic","error_msg","placeholder","appleStep2","selectedRowKeys","onSelectChange","filter","next","hasSelected","nextStep","rowSelection","onChange","padding","nextStepButton","columns","dataIndex","rowKey","dataSource","pagination","bordered","formatSeconds","seconds","setSeconds","toISOString","substr","FormItem","Form","Item","appleStep3","settingsItem","settingsVisible","placement","nextStepDisabled","Math","round","resume","pause","trigger","content","onConfirm","okText","cancelText","pauseSearch","startSearch","row","trackLabel","getFieldDecorator","form","onSubmit","settingsFormSave","label","help","initialValue","rules","required","marginBottom","htmlType","preventDefault","validateFields","values","each","option","selectedTrack","spotifyTrack","link","external_urls","spotify","image","duration","duration_ms","track_number","artistName","artists","artistLink","albumName","albumLink","visible","footer","onCancel","itemLayout","renderItem","item","switchAction","checked","setSpotifySelected","actions","Meta","rel","innerWidth","gutter","span","precision","valueStyle","suffix","percent","strokeColor","buttons","render","statusColumn","songSettingsModal","TextArea","Input","appleStep4","userPlaylists","fetchingPlaylists","isCreatingPlaylist","createPlaylistModalVisible","isImporting","alert","event","importSong","map","closable","maskClosable","validateTrigger","autosize","defaultChecked","err","user","setSpotifyStatus","songs","getPlaylist","chunks","chunk","songsUri","songIndex","uri","showIcon","overlay","selectPlaylistsMenu","selectPlaylist","importTable","createPlaylistModal","Apple","isFetching","step","appleMusicPlaylist","AppleStep3","AppleStep4","step1","step2","step3","step4","Step","Steps","current","VKStep1","app","splice","toString","Number","access_key","setVKPlaylist","VKStep2","VKStep3","VKStep4","VK","YandexStep1","setYandexPlaylist","YandexStep2","YandexStep3","YandexStep4","LoginCallback","token","hash","access_token","setItem","history","Routes","exact","path","component","Yandex","App","ReactDOM","basename","document","getElementById"],"mappings":"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","file":"static/js/main.ae2a99f2.chunk.js","sourcesContent":["export const API_URL = 'https://api.spotify.com';\nexport const SPOTIFY_CLIENT_ID = 'b1a70e47e2fa4e01bc095a4098cbcb0a';","import { SPOTIFY_CLIENT_ID } from '../constants/Constants';\n\nexport const getLoginUrl = (scopes = [\n  'playlist-read-private',\n  'playlist-read-collaborative',\n  'playlist-modify-public',\n  'playlist-modify-private',\n  'user-library-read',\n  'user-library-modify',\n  'user-top-read'\n]) => {\n  let queryArgs = [];\n  queryArgs.push(`client_id=${SPOTIFY_CLIENT_ID}`);\n  queryArgs.push(`response_type=token`);\n  queryArgs.push(`redirect_uri=${encodeURIComponent(`${window.location.protocol}//${window.location.host}/2spotify/login-callback`)}`);\n  queryArgs.push(`scope=${scopes.join(' ')}`);\n  return `https://accounts.spotify.com/authorize/?${queryArgs.join('&')}`;\n};\n\nexport const isLoggedIn = () => localStorage.getItem('__token') !== null;\n\nexport const getToken = () => localStorage.getItem('__token');\n\nexport const logout = () => localStorage.removeItem('__token');\n\nexport const setToken = (token) => {\n  localStorage.setItem('__token', token);\n};","import originalAxios from 'axios';\n\nimport { API_URL } from '../constants/Constants';\nimport { getToken } from './AuthService';\n\nexport const axios = () => {\n  if (typeof axios.instance === 'undefined') {\n    axios.instance = originalAxios.create({\n      headers: {\n        Authorization: `Bearer ${getToken()}`\n      }\n    });\n  }\n  return axios.instance;\n};\n\nexport const getCurrentUser = () => {\n  return axios().get(\n    `${API_URL}/v1/me`\n  );\n};\n\nexport const search = (search) => {\n  return axios().get(\n    `${API_URL}/v1/search`,\n    {\n      params: search\n    }\n  );\n};\n\nexport const getPlaylists = () => {\n  return axios().get(\n    `${API_URL}/v1/me/playlists`\n  );\n};\n\nexport const createPlaylist = (userId, name, description = '', isPublic = false) => {\n  return axios().post(\n    `${API_URL}/v1/users/${userId}/playlists`,\n    {\n      name,\n      description,\n      'public': isPublic\n    }\n  );\n};\nexport const addTrackToPlaylist = (userId, playlistId, uris) => {\n  return axios().post(\n    `${API_URL}/v1/users/${userId}/playlists/${playlistId}/tracks`,\n    {uris}\n  );\n};","import React from 'react';\nimport { PageHeader, Button, message } from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\n\nimport { isLoggedIn } from '../../services/AuthService';\nimport { getCurrentUser } from '../../services/ApiService';\nimport * as RouteConstants from '../../constants/RouteConstants';\n\nconst error = () => {\n  message.error('Authorisation error');\n};\n\nclass Header extends React.Component {\n\n  constructor (props) {\n    super(props)\n\n    this.state = { name: '' }\n    this.state = { photo: '' }\n    this.state = { isFetchingUser: false }\n  }\n\n  componentDidUpdate () {\n    if (this.state.isFetchingUser) return;\n    if (isLoggedIn()) {\n      getCurrentUser()\n        .then((res) => {\n          this.setState({\n            isFetchingUser: true,\n            photo: res.data.images[0].url,\n            name: res.data.display_name\n          });\n        })\n        .catch(() => {\n          error()\n        });\n    }\n  }\n\n  render () {\n    return (\n      <PageHeader\n    title=\"2 Spotify\"\n    subTitle = {this.state.isFetchingUser ? `Hello, ${this.state.name}!` : 'Hello, friend!'}\n    extra={[\n      <Button key={RouteConstants.HOME} type=\"link\" style={{marginTop: '6px', marginLeft: '8px', border: '1px solid transparent', borderColor: '#d9d9d9', borderRadius: '4px', color: '#000'}}><Link to={RouteConstants.HOME}>Home</Link></Button>,\n      <Button id='AppleButton' key={RouteConstants.APPlE} type=\"link\" style={{marginTop: '6px', marginLeft: '8px'}}><Link to={RouteConstants.APPlE}>Apple Music</Link></Button>,\n      <Button id='VKButton' key={RouteConstants.VK} type=\"link\" style={{marginTop: '6px', marginLeft: '8px'}}><Link to={RouteConstants.VK}>Boom (VK)</Link></Button>,\n      <Button id='YandexButton' key={RouteConstants.YANDEX} type=\"link\" style={{marginTop: '6px', marginLeft: '8px'}}><Link to={RouteConstants.YANDEX}>Yandex</Link></Button>\n    ]}\n    avatar={ this.state.isFetchingUser ? {src: this.state.photo} : null}\n    ></PageHeader>\n    );\n  }\n}\n\nexport default withRouter(Header);","export const HOME = '/';\nexport const APPlE = '/apple';\nexport const VK = '/vk';\nexport const YANDEX = '/yandex';\nexport const LOGIN_CALLBACK = '/login-callback';","import React from 'react';\nimport { Button } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { isLoggedIn, getLoginUrl, logout } from '../services/AuthService';\n\nexport default class Home extends React.Component {\n\n  logout () {\n    logout();\n    this.forceUpdate();\n  }\n\n  loginMessage () {\n    return <div className='button'>\n      {isLoggedIn()\n        ? <Button size=\"l\" style={{ background: 'rgb(240, 54, 63)', color: '#fff', display: 'flex', margin: '0 auto', width: '202px', height: '53px', borderRadius: '500px', alignItems: 'center', justifyContent: 'center', cursor: 'pointer' }} onClick={this.logout.bind(this)}>Logout</Button>\n        : <Button size=\"l\" style={{ background: '#1DB954', color: '#fff', display: 'flex', margin: '0 auto', width: '202px', height: '53px', borderRadius: '500px', alignItems: 'center', justifyContent: 'center', cursor: 'pointer' }} href={getLoginUrl()}>Login</Button>}\n    </div>;\n  }\n\n  render () {\n    return (\n      <div>\n        <h1 style={{textAlign: 'center'}}>2 Spotify <span role=\"img\" aria-label=\"music\">🎸</span></h1>\n        <h2 style={{textAlign: 'center'}}>\n          This tool will help you transfer your playlists from any service to Spotify.\n        </h2>\n        {this.loginMessage()}\n      </div>\n    );\n  }\n}","import Papa from 'papaparse';\nimport axios from 'axios';\nimport axiosCancel from 'axios-cancel';\nimport { findIndex } from 'lodash';\n\nimport { API_URL } from '../constants/Constants';\nimport { getToken } from './AuthService';\n\naxiosCancel(axios);\n\nexport default class AppleMusicPlaylist {\n\n  constructor (settings) {\n    this._playlist = [];\n    this.changeCallbacks = [];\n    this.spotifyStatus = null;\n    this.settings = {\n      searchFormat: '{name} {artist}',\n      ...settings\n    };\n  }\n\n  setPlaylist (playlist) {\n    let parsed = Papa.parse(playlist, {\n      header: true\n    });\n    if (parsed.errors.length && !parsed.data.length) {\n      throw new Error('Couldn\\'t parse the playlist.');\n    }\n    parsed.data.pop();\n    for (let index = 0; parsed.data.length > index; index++) {\n      const\n        track = parsed.data[index],\n        keys = Object.keys(track);\n      if (!keys.includes('Name') || !keys.includes('Artist') || !keys.includes('Album')) {\n        throw new Error('Playlist is not a valid apple music playlist.');\n      }\n      this._playlist.push({\n        index,\n        name           : track.Name,\n        artist         : track.Artist,\n        album          : track.Album,\n        composer       : track.Composer,\n        discCount      : track['Disc Count'],\n        discNumber     : track['Disc Number'],\n        genre          : track.Genre,\n        trackCount     : track['Track Count'],\n        trackNumber    : track['Track Number'],\n        year           : track.Year,\n        spotifyStatus  : 'pending',\n        spotifyResults : null,\n        spotifySelected: null\n      });\n    }\n  }\n\n  setAppleMusic (response) {\n    var x = 0\n    for (var value of response.data.items) {\n      this._playlist.push({\n        index          : x,\n        name           : value.title,\n        artist         : value.artist,\n        //album          : value.album.title,\n        //composer       : value.main_artists.name,\n        discCount      : '1',\n        discNumber     : '1',\n        year           : new Date(value.date * 1000).getFullYear(),\n        spotifyStatus  : 'pending',\n        spotifyResults : null,\n        spotifySelected: null\n      });\n      x++\n    }\n  }\n\n  setVKPlaylist (response) {\n    var x = 0\n    for (var value of response.data.items) {\n      this._playlist.push({\n        index          : x,\n        name           : value.title,\n        artist         : value.artist,\n        //album          : value.album.title,\n        //composer       : value.main_artists.name,\n        discCount      : '1',\n        discNumber     : '1',\n        year           : new Date(value.date * 1000).getFullYear(),\n        spotifyStatus  : 'pending',\n        spotifyResults : null,\n        spotifySelected: null\n      });\n      x++\n    }\n  }\n\n  setYandexPlaylist (response) {\n    this._playlist = response.data\n  }\n\n  filter (indexes) {\n    const newPlaylist = [];\n    for (let i = 0; indexes.length > i; i++) {\n      newPlaylist.push(this._playlist[indexes[i]]);\n    }\n    this._playlist = newPlaylist;\n  }\n\n  get playlist () {\n    return this._playlist;\n  }\n\n  getPlaylist (status) {\n    const output = [];\n    for (let index = 0; this._playlist.length > index; index++) {\n      if (this._playlist[index].spotifyStatus === status) {\n        output.push(this._playlist[index]);\n      }\n    }\n    return output;\n  }\n\n  setSpotifySelected (trackIndex, id) {\n    const track = this._playlist[trackIndex];\n    let selectedIndex = findIndex(track.spotifyResults, {id});\n    track.spotifySelected = track.spotifyResults[selectedIndex];\n    this.triggerChange();\n    return this;\n  }\n\n  setSpotifyStatus (status) {\n    this.spotifyStatus = status;\n    this.triggerChange();\n\n    return this;\n  }\n\n  onChange (cb) {\n    this.changeCallbacks.push(cb);\n  }\n\n  triggerChange () {\n    for (let index = 0; this.changeCallbacks.length > index; index++) {\n      this.changeCallbacks[index]();\n    }\n  }\n\n  startSearch () {\n    this.searchTimeout = setTimeout(this._search.bind(this), 1);\n  }\n\n  searchKeyword (track) {\n    const placeholders = ['{name}', '{artist}', '{album}', '{composer}', '{discCount}', '{discNumber}', '{genre}', '{trackCount}', '{trackNumber}', '{year}'];\n    let keyword = this.settings.searchFormat;\n    for (let index = 0; placeholders.length > index; index++) {\n      keyword = keyword.replace(placeholders[index], track[placeholders[index].slice(1, -1)]);\n    }\n    return keyword;\n  }\n\n  option (key, value) {\n    this.settings[key] = value;\n\n    return this;\n  }\n\n  _search () {\n    let track;\n    for (let index = 0; this._playlist.length > index; index++) {\n      if (this._playlist[index].spotifyStatus === 'pending') {\n        track = this._playlist[index];\n        break;\n      }\n    }\n    if (!track) {\n      this.spotifyStatus = 'searchComplete';\n      this.triggerChange();\n      return;\n    }\n    this.spotifyStatus = 'searching';\n    track.spotifyStatus = 'searching';\n    this.triggerChange();\n    axios.get(\n      `${API_URL}/v1/search`,\n      {\n        requestId: 'search',\n        headers  : {\n          Authorization: `Bearer ${getToken()}`\n        },\n        params   : {\n          type : 'track',\n          q    : this.searchKeyword(track),\n          limit: 10\n        }\n      }\n    )\n      .then((res) => {\n        track.spotifyStatus = res.data.tracks.total === 0 ? 'noResult' : 'withResult';\n        track.spotifyResults = res.data.tracks.items;\n        if (res.data.tracks.total)\n          track.spotifySelected = res.data.tracks.items[0];\n        this.searchTimeout = setTimeout(this._search.bind(this), 10);\n      })\n      .catch((error) => {\n        track.spotifyStatus = axios.isCancel(error) ? 'pending' : 'failed';\n      })\n      .finally(() => {\n        this.triggerChange();\n      });\n\n  }\n\n  pauseSearch () {\n    this.spotifyStatus = 'paused';\n    clearTimeout(this.searchTimeout);\n    this.triggerChange();\n    axios.cancel('search');\n  }\n\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Icon24SettingsOutline from '@vkontakte/icons/dist/56/settings_outline';\nimport Icon28ArrowRightOutline from '@vkontakte/icons/dist/28/arrow_right_outline';\nimport Icon28SmileOutline from '@vkontakte/icons/dist/44/smile_outline';\nimport Icon28Pause from '@vkontakte/icons/dist/48/pause';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {\n  Table,\n  Button,\n  Tag,\n  Modal,\n  List,\n  Avatar,\n  Switch,\n  Popconfirm,\n  Popover,\n  Form,\n  Input,\n  Progress,\n  Statistic,\n  Row,\n  Col,\n  Card\n} from 'antd';\nimport { each } from 'lodash';\nimport { formatSeconds } from '../../services/UtilsService';\n\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nvar completed, finded, failed;\nconst FormItem = Form.Item;\n\nclass appleStep3 extends React.Component {\n\n  state = {\n    settingsItem   : null,\n    settingsVisible: false\n  };\n\n  componentDidMount () {\n    this.props.playlist.onChange(() => {\n      this.forceUpdate();\n    });\n  }\n\n  buttons (placement) {\n    let nextStepDisabled = true;\n    const {playlist} = this.props;\n    const {spotifyStatus} = playlist;\n    completed = 0;\n    finded = 0;\n    failed = 0;\n    for (let index = 0; playlist.playlist.length > index; index++) {\n      if (playlist.playlist[index].spotifyStatus === 'withResult') {\n        nextStepDisabled = false;\n      }\n      if (playlist.playlist[index].spotifyStatus !== 'pending') {\n        completed++\n      }\n      if (playlist.playlist[index].spotifyStatus === 'withResult') {\n        finded++\n      }\n      if (playlist.playlist[index].spotifyStatus === 'noResult') {\n        failed++\n      }\n    }\n    completed = Math.round(completed/playlist.playlist.length*100)\n    return <div style={{margin: '16px 0', textAlign: 'right'}}>\n      <Button\n        size={'large'}\n        style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n        disabled={spotifyStatus !== 'paused' && spotifyStatus !== null}\n        onClick={this.resume.bind(this)}\n        type='dashed'\n      >\n        Start/Resume\n      </Button>\n      <Button\n        size={'large'}\n        style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3 }}\n        disabled={spotifyStatus !== 'searching'}\n        onClick={this.pause.bind(this)}\n      >\n        <div display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Pause<Icon28Pause width={20} height={20} style={{marginLeft: 4}}/>\n            </div>\n        </div>\n      </Button>\n      <Popover\n        trigger=\"click\"\n        placement={placement === 'top' ? 'bottomRight' : 'topRight'}\n        content={this.settings()}\n      >\n        <Button\n          size={'large'}\n          style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n        >\n          <div display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Search Settings<Icon24SettingsOutline width={20} height={20} style={{marginLeft: 4}}/>\n            </div>\n        </div>\n        </Button>\n      </Popover>\n\n      {\n        playlist.spotifyStatus !== 'searchComplete' &&\n        <Popconfirm\n          title=\"The search is not complete. Are you sure you want to go to the next step?\"\n          onConfirm={this.nextStep.bind(this)}\n          okText=\"Yes\"\n          placement={placement === 'top' ? 'bottomRight' : 'topRight'}\n          cancelText=\"No\">\n          <Button\n            type=\"primary\"\n            size={'large'}\n            disabled={nextStepDisabled}\n            style={{borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n          >\n            <div display='flex'>\n              <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n            Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n              </div>\n            </div>\n          </Button>\n        </Popconfirm>\n      }\n      {\n        playlist.spotifyStatus === 'searchComplete' &&\n        <Button\n          type=\"link\"\n          size={'large'}\n          style={{ background: '#d6363f', color: '#fff', borderRadius: '500px', marginTop: 3 }}\n          onClick={this.nextStep.bind(this)}\n          disabled={nextStepDisabled}\n        >\n          <div display='flex'>\n              <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n            Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n              </div>\n            </div>\n        </Button>\n      }\n\n    </div>;\n  }\n\n  nextStep () {\n    this.props.nextStep();\n  }\n\n  pause () {\n    this.props.playlist.pauseSearch();\n  }\n\n  resume () {\n    this.props.playlist.startSearch();\n  }\n\n  trackLabel (track) {\n    const status = track.spotifyStatus;\n    switch (status) {\n      default:\n      case 'pending':\n        return <Tag color=\"#7f8c8d\" style={{borderRadius: '500px'}}>Pending</Tag>;\n      case 'failed':\n        return <Tag color=\"#e74c3c\" style={{borderRadius: '500px'}}>Failed</Tag>;\n      case 'searching':\n        return <Tag color=\"#8e44ad\" style={{borderRadius: '500px'}}>Searching</Tag>;\n      case 'noResult':\n        return <Tag color=\"#f1c40f\" style={{borderRadius: '500px'}}>No Result</Tag>;\n      case 'withResult':\n        return <Tag color=\"#27ae60\" style={{borderRadius: '500px'}}>Found</Tag>;\n    }\n  }\n\n  statusColumn (text, row) {\n    const status = row.spotifyStatus;\n    return <div style={{display: 'flex', alignItems: 'center'}}>\n      {this.trackLabel(row)}\n      {\n        status === 'withResult' &&\n        <Button\n          style={{borderRadius: '500px'}}\n          size={'small'}\n          onClick={() => {\n            this.setState({settingsItem: row.index, settingsVisible: true});\n          }}><Icon24SettingsOutline width={20} height={20}/></Button>}\n    </div>;\n  }\n\n  settings () {\n    const {getFieldDecorator} = this.props.form;\n    return (\n      <Form\n        style={{width: 300}}\n        onSubmit={this.settingsFormSave.bind(this)}\n      >\n        <FormItem\n          label='Search Format'\n          help=\"Placeholders: {name}, {artist}, {album}, {composer}, {discCount}, {discNumber}, {genre}, {trackCount}, {trackNumber} and {year}\"\n        >\n          {getFieldDecorator('searchFormat',\n            {\n              initialValue: this.props.playlist.settings.searchFormat,\n              rules       : [{required: true, message: 'Please fill the field.'}],\n            })(\n            <Input placeholder=\"Search Format\"/>\n          )}\n        </FormItem>\n        <FormItem style={{marginBottom: 0}}>\n          <Button\n            type=\"primary\"\n            style={{width: '100%'}}\n            htmlType=\"submit\"\n          ><div display='flex'>\n          <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer'}}>\n            Done<Icon28SmileOutline width={20} height={20}  style={{marginLeft: 4}}/>\n          </div>\n        </div>\n          </Button>\n        </FormItem>\n      </Form>\n    );\n  }\n\n  settingsFormSave (e) {\n    e.preventDefault();\n    const {props} = this;\n    props.form.validateFields((errors, values) => {\n      if (!errors) {\n        each(values, (value, key) => {\n          props.playlist.option(key, value);\n        });\n      }\n    });\n  }\n\n  songSettingsModal () {\n    const {playlist} = this.props;\n    const {settingsItem} = this.state;\n    let track, data = [], selectedTrack;\n    if (this.state.settingsItem !== null) {\n      track = playlist.playlist[settingsItem];\n      selectedTrack = playlist.playlist[settingsItem].spotifySelected;\n      for (let index = 0; track.spotifyResults.length > index; index++) {\n        let spotifyTrack = track.spotifyResults[index];\n        data.push({\n          index,\n          id         : spotifyTrack.id,\n          name       : spotifyTrack.name,\n          link       : spotifyTrack.external_urls.spotify,\n          image      : spotifyTrack.album.images[1].url,\n          duration   : spotifyTrack.duration_ms / 1000,\n          trackNumber: spotifyTrack.track_number,\n          artistName : spotifyTrack.artists[0].name,\n          artistLink : spotifyTrack.artists[0].external_urls.spotify,\n          albumName  : spotifyTrack.album.name,\n          albumLink  : spotifyTrack.album.external_urls.spotify,\n          track      : spotifyTrack\n        });\n      }\n    }\n    return <Modal\n      title=\"Song Settings\"\n      visible={this.state.settingsVisible}\n      footer={null}\n      onCancel={() => {\n        this.setState({settingsVisible: false});\n        setTimeout(() => this.setState({settingsItem: null}), 200);\n      }}\n    >\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={data}\n        renderItem={item => {\n          const switchAction = <Switch\n            checked={selectedTrack.id === item.id}\n            onChange={() => {\n              playlist.setSpotifySelected(settingsItem, item.id);\n            }}/>;\n          return <List.Item actions={[switchAction]}>\n            <List.Item.Meta\n              avatar={<Avatar src={item.image} size=\"large\"/>}\n              description={<p>Album: <a href={item.albumLink}>{item.albumName}</a> - {formatSeconds(item.duration)}</p>}\n              title={<a rel=\"noopener noreferrer\" href={item.link} target=\"_blank\">{item.artistName} - {item.name}</a>}\n            />\n          </List.Item>;\n        }}\n      />\n    </Modal>;\n  }\n\n  render () {\n    return <div>\n      <div style={{maxWidth: window.innerWidth-window.innerWidth*0.3, marginRight: 'auto', marginLeft: 'auto', textAlign: 'center' }}>\n      <Row gutter={16}>\n      <Col span={12}>\n        <Card>\n          <Statistic\n            title=\"Found\"\n            value={finded}\n            precision={0}\n            valueStyle={{ color: '#3f8600' }}\n            suffix='👍'\n            style={{height: '57px'}}\n          />\n        </Card>\n      </Col>\n      <Col span={12}>\n        <Card>\n          <Statistic\n            title=\"Without result\"\n            value={failed}\n            precision={0}\n            valueStyle={{ color: '#cf1322' }}\n            suffix='👎'\n            style={{height: '57px'}}\n          />\n        </Card>\n      </Col>\n    </Row>\n      <Progress percent={completed} status=\"active\" strokeColor={{\n        '0%': '#108ee9',\n        '100%': '#87d068',\n      }} />\n      </div>\n      {this.buttons('top')}\n      <Table\n        rowKey=\"index\"\n        columns={[\n          {\n            title    : 'Status',\n            dataIndex: 'status',\n            width    : '13%',\n            render   : this.statusColumn.bind(this)\n          },\n          {\n            title    : 'Name',\n            dataIndex: 'name',\n          },\n          {\n            title    : 'Artist',\n            dataIndex: 'artist',\n          },\n          {\n            title    : 'Album',\n            dataIndex: 'album',\n          }\n        ]}\n        dataSource={this.props.playlist.playlist}\n        pagination={false}\n        bordered\n      />\n      {this.buttons('bottom')}\n      {this.songSettingsModal()}\n    </div>;\n  }\n}\n\nappleStep3.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  nextStep: PropTypes.func.isRequired\n};\n\nexport default Form.create()(appleStep3);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Icon24SettingsOutline from '@vkontakte/icons/dist/56/settings_outline';\nimport Icon28ArrowRightOutline from '@vkontakte/icons/dist/28/arrow_right_outline';\nimport Icon28SmileOutline from '@vkontakte/icons/dist/44/smile_outline';\nimport Icon28Pause from '@vkontakte/icons/dist/48/pause';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {\n  Table,\n  Button,\n  Tag,\n  Modal,\n  List,\n  Avatar,\n  Switch,\n  Popconfirm,\n  Popover,\n  Form,\n  Input,\n  Progress,\n  Statistic,\n  Row,\n  Col,\n  Card\n} from 'antd';\nimport { each } from 'lodash';\nimport { formatSeconds } from '../../services/UtilsService';\n\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nvar completed, finded, failed;\nconst FormItem = Form.Item;\n\nclass VKStep3 extends React.Component {\n\n  state = {\n    settingsItem   : null,\n    settingsVisible: false\n  };\n\n  componentDidMount () {\n    this.props.playlist.onChange(() => {\n      this.forceUpdate();\n    });\n  }\n\n  buttons (placement) {\n    let nextStepDisabled = true;\n    const {playlist} = this.props;\n    const {spotifyStatus} = playlist;\n    completed = 0;\n    finded = 0;\n    failed = 0;\n    for (let index = 0; playlist.playlist.length > index; index++) {\n      if (playlist.playlist[index].spotifyStatus === 'withResult') {\n        nextStepDisabled = false;\n      }\n      if (playlist.playlist[index].spotifyStatus !== 'pending') {\n        completed++\n      }\n      if (playlist.playlist[index].spotifyStatus === 'withResult') {\n        finded++\n      }\n      if (playlist.playlist[index].spotifyStatus === 'noResult') {\n        failed++\n      }\n    }\n    completed = Math.round(completed/playlist.playlist.length*100)\n    return <div style={{margin: '16px 0', textAlign: 'right'}}>\n      <Button\n        size={'large'}\n        style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n        disabled={spotifyStatus !== 'paused' && spotifyStatus !== null}\n        onClick={this.resume.bind(this)}\n        type='dashed'\n      >\n        Start/Resume\n      </Button>\n      <Button\n        size={'large'}\n        style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3 }}\n        disabled={spotifyStatus !== 'searching'}\n        onClick={this.pause.bind(this)}\n      >\n        <div display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Pause<Icon28Pause width={20} height={20} style={{marginLeft: 4}}/>\n            </div>\n        </div>\n      </Button>\n      <Popover\n        trigger=\"click\"\n        placement={placement === 'top' ? 'bottomRight' : 'topRight'}\n        content={this.settings()}\n      >\n        <Button\n          size={'large'}\n          style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n        >\n          <div display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Search Settings<Icon24SettingsOutline width={20} height={20} style={{marginLeft: 4}}/>\n            </div>\n        </div>\n        </Button>\n      </Popover>\n\n      {\n        playlist.spotifyStatus !== 'searchComplete' &&\n        <Popconfirm\n          title=\"The search is not complete. Are you sure you want to go to the next step?\"\n          onConfirm={this.nextStep.bind(this)}\n          okText=\"Yes\"\n          placement={placement === 'top' ? 'bottomRight' : 'topRight'}\n          cancelText=\"No\">\n          <Button\n            type=\"primary\"\n            size={'large'}\n            disabled={nextStepDisabled}\n            style={{borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n          >\n            <div display='flex'>\n              <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n            Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n              </div>\n            </div>\n          </Button>\n        </Popconfirm>\n      }\n      {\n        playlist.spotifyStatus === 'searchComplete' &&\n        <Button\n          type=\"link\"\n          size={'large'}\n          style={{ background: '#d6363f', color: '#fff', borderRadius: '500px', marginTop: 3 }}\n          onClick={this.nextStep.bind(this)}\n          disabled={nextStepDisabled}\n        >\n          <div display='flex'>\n              <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n            Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n              </div>\n            </div>\n        </Button>\n      }\n\n    </div>;\n  }\n\n  nextStep () {\n    this.props.nextStep();\n  }\n\n  pause () {\n    this.props.playlist.pauseSearch();\n  }\n\n  resume () {\n    this.props.playlist.startSearch();\n  }\n\n  trackLabel (track) {\n    const status = track.spotifyStatus;\n    switch (status) {\n      default:\n      case 'pending':\n        return <Tag color=\"#7f8c8d\" style={{borderRadius: '500px'}}>Pending</Tag>;\n      case 'failed':\n        return <Tag color=\"#e74c3c\" style={{borderRadius: '500px'}}>Failed</Tag>;\n      case 'searching':\n        return <Tag color=\"#8e44ad\" style={{borderRadius: '500px'}}>Searching</Tag>;\n      case 'noResult':\n        return <Tag color=\"#f1c40f\" style={{borderRadius: '500px'}}>No Result</Tag>;\n      case 'withResult':\n        return <Tag color=\"#27ae60\" style={{borderRadius: '500px'}}>Found</Tag>;\n    }\n  }\n\n  statusColumn (text, row) {\n    const status = row.spotifyStatus;\n    return <div style={{display: 'flex', alignItems: 'center'}}>\n      {this.trackLabel(row)}\n      {\n        status === 'withResult' &&\n        <Button\n          style={{borderRadius: '500px'}}\n          size={'small'}\n          onClick={() => {\n            this.setState({settingsItem: row.index, settingsVisible: true});\n          }}><Icon24SettingsOutline width={20} height={20}/></Button>}\n    </div>;\n  }\n\n  settings () {\n    const {getFieldDecorator} = this.props.form;\n    return (\n      <Form\n        style={{width: 300}}\n        onSubmit={this.settingsFormSave.bind(this)}\n      >\n        <FormItem\n          label='Search Format'\n          help=\"Placeholders: {name}, {artist}, {discCount}, {discNumber} and {year}\"\n        >\n          {getFieldDecorator('searchFormat',\n            {\n              initialValue: this.props.playlist.settings.searchFormat,\n              rules       : [{required: true, message: 'Please fill the field.'}],\n            })(\n            <Input placeholder=\"Search Format\"/>\n          )}\n        </FormItem>\n        <FormItem style={{marginBottom: 0}}>\n          <Button\n            type=\"primary\"\n            style={{width: '100%'}}\n            htmlType=\"submit\"\n          ><div display='flex'>\n          <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer'}}>\n            Done<Icon28SmileOutline width={20} height={20}  style={{marginLeft: 4}}/>\n          </div>\n        </div>\n          </Button>\n        </FormItem>\n      </Form>\n    );\n  }\n\n  settingsFormSave (e) {\n    e.preventDefault();\n    const {props} = this;\n    props.form.validateFields((errors, values) => {\n      if (!errors) {\n        each(values, (value, key) => {\n          props.playlist.option(key, value);\n        });\n      }\n    });\n  }\n\n  songSettingsModal () {\n    const {playlist} = this.props;\n    const {settingsItem} = this.state;\n    let track, data = [], selectedTrack;\n    if (this.state.settingsItem !== null) {\n      track = playlist.playlist[settingsItem];\n      selectedTrack = playlist.playlist[settingsItem].spotifySelected;\n      for (let index = 0; track.spotifyResults.length > index; index++) {\n        let spotifyTrack = track.spotifyResults[index];\n        data.push({\n          index,\n          id         : spotifyTrack.id,\n          name       : spotifyTrack.name,\n          link       : spotifyTrack.external_urls.spotify,\n          image      : spotifyTrack.album.images[1].url,\n          duration   : spotifyTrack.duration_ms / 1000,\n          trackNumber: spotifyTrack.track_number,\n          artistName : spotifyTrack.artists[0].name,\n          artistLink : spotifyTrack.artists[0].external_urls.spotify,\n          albumName  : spotifyTrack.album.name,\n          albumLink  : spotifyTrack.album.external_urls.spotify,\n          track      : spotifyTrack\n        });\n      }\n    }\n    return <Modal\n      title=\"Song Settings\"\n      visible={this.state.settingsVisible}\n      footer={null}\n      onCancel={() => {\n        this.setState({settingsVisible: false});\n        setTimeout(() => this.setState({settingsItem: null}), 200);\n      }}\n    >\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={data}\n        renderItem={item => {\n          const switchAction = <Switch\n            checked={selectedTrack.id === item.id}\n            onChange={() => {\n              playlist.setSpotifySelected(settingsItem, item.id);\n            }}/>;\n          return <List.Item actions={[switchAction]}>\n            <List.Item.Meta\n              avatar={<Avatar src={item.image} size=\"large\"/>}\n              description={<p>Album: <a href={item.albumLink}>{item.albumName}</a> - {formatSeconds(item.duration)}</p>}\n              title={<a rel=\"noopener noreferrer\" href={item.link} target=\"_blank\">{item.artistName} - {item.name}</a>}\n            />\n          </List.Item>;\n        }}\n      />\n    </Modal>;\n  }\n\n  render () {\n    return <div>\n      <div style={{maxWidth: window.innerWidth-window.innerWidth*0.3, marginRight: 'auto', marginLeft: 'auto', textAlign: 'center' }}>\n      <Row gutter={16}>\n      <Col span={12}>\n        <Card>\n          <Statistic\n            title=\"Found\"\n            value={finded}\n            precision={0}\n            valueStyle={{ color: '#3f8600' }}\n            suffix='👍'\n            style={{height: '57px'}}\n          />\n        </Card>\n      </Col>\n      <Col span={12}>\n        <Card>\n          <Statistic\n            title=\"Without result\"\n            value={failed}\n            precision={0}\n            valueStyle={{ color: '#cf1322' }}\n            suffix='👎'\n            style={{height: '57px'}}\n          />\n        </Card>\n      </Col>\n    </Row>\n      <Progress percent={completed} status=\"active\" strokeColor={{\n        '0%': '#108ee9',\n        '100%': '#87d068',\n      }} />\n      </div>\n      {this.buttons('top')}\n      <Table\n        rowKey=\"index\"\n        columns={[\n          {\n            title    : 'Status',\n            dataIndex: 'status',\n            width    : '13%',\n            render   : this.statusColumn.bind(this)\n          },\n          {\n            title    : 'Name',\n            dataIndex: 'name',\n          },\n          {\n            title    : 'Artist',\n            dataIndex: 'artist',\n          },\n          {\n            title    : 'Album',\n            dataIndex: 'album',\n          }\n        ]}\n        dataSource={this.props.playlist.playlist}\n        pagination={false}\n        bordered\n      />\n      {this.buttons('bottom')}\n      {this.songSettingsModal()}\n    </div>;\n  }\n}\n\nVKStep3.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  nextStep: PropTypes.func.isRequired\n};\n\nexport default Form.create()(VKStep3);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Icon24SettingsOutline from '@vkontakte/icons/dist/56/settings_outline';\nimport Icon28ArrowRightOutline from '@vkontakte/icons/dist/28/arrow_right_outline';\nimport Icon28SmileOutline from '@vkontakte/icons/dist/44/smile_outline';\nimport Icon28Pause from '@vkontakte/icons/dist/48/pause';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {\n  Table,\n  Button,\n  Tag,\n  Modal,\n  List,\n  Avatar,\n  Switch,\n  Popconfirm,\n  Popover,\n  Form,\n  Input,\n  Progress,\n  Statistic,\n  Row,\n  Col,\n  Card\n} from 'antd';\nimport { each } from 'lodash';\nimport { formatSeconds } from '../../services/UtilsService';\n\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nvar completed, finded, failed;\nconst FormItem = Form.Item;\n\nclass YandexStep3 extends React.Component {\n\n  state = {\n    settingsItem   : null,\n    settingsVisible: false\n  };\n\n  componentDidMount () {\n    this.props.playlist.onChange(() => {\n      this.forceUpdate();\n    });\n  }\n\n  buttons (placement) {\n    let nextStepDisabled = true;\n    const {playlist} = this.props;\n    const {spotifyStatus} = playlist;\n    completed = 0;\n    finded = 0;\n    failed = 0;\n    for (let index = 0; playlist.playlist.length > index; index++) {\n      if (playlist.playlist[index].spotifyStatus === 'withResult') {\n        nextStepDisabled = false;\n      }\n      if (playlist.playlist[index].spotifyStatus !== 'pending') {\n        completed++\n      }\n      if (playlist.playlist[index].spotifyStatus === 'withResult') {\n        finded++\n      }\n      if (playlist.playlist[index].spotifyStatus === 'noResult') {\n        failed++\n      }\n    }\n    completed = Math.round(completed/playlist.playlist.length*100)\n    return <div style={{margin: '16px 0', textAlign: 'right'}}>\n      <Button\n        size={'large'}\n        style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n        disabled={spotifyStatus !== 'paused' && spotifyStatus !== null}\n        onClick={this.resume.bind(this)}\n        type='dashed'\n      >\n        Start/Resume\n      </Button>\n      <Button\n        size={'large'}\n        style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3 }}\n        disabled={spotifyStatus !== 'searching'}\n        onClick={this.pause.bind(this)}\n      >\n        <div display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Pause<Icon28Pause width={20} height={20} style={{marginLeft: 4}}/>\n            </div>\n        </div>\n      </Button>\n      <Popover\n        trigger=\"click\"\n        placement={placement === 'top' ? 'bottomRight' : 'topRight'}\n        content={this.settings()}\n      >\n        <Button\n          size={'large'}\n          style={{marginRight: 7, borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n        >\n          <div display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Search Settings<Icon24SettingsOutline width={20} height={20} style={{marginLeft: 4}}/>\n            </div>\n        </div>\n        </Button>\n      </Popover>\n\n      {\n        playlist.spotifyStatus !== 'searchComplete' &&\n        <Popconfirm\n          title=\"The search is not complete. Are you sure you want to go to the next step?\"\n          onConfirm={this.nextStep.bind(this)}\n          okText=\"Yes\"\n          placement={placement === 'top' ? 'bottomRight' : 'topRight'}\n          cancelText=\"No\">\n          <Button\n            type=\"primary\"\n            size={'large'}\n            disabled={nextStepDisabled}\n            style={{borderRadius: '500px', cursor: 'pointer', marginTop: 3}}\n          >\n            <div display='flex'>\n              <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n            Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n              </div>\n            </div>\n          </Button>\n        </Popconfirm>\n      }\n      {\n        playlist.spotifyStatus === 'searchComplete' &&\n        <Button\n          type=\"link\"\n          size={'large'}\n          style={{ background: '#d6363f', color: '#fff', borderRadius: '500px', marginTop: 3 }}\n          onClick={this.nextStep.bind(this)}\n          disabled={nextStepDisabled}\n        >\n          <div display='flex'>\n              <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n            Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n              </div>\n            </div>\n        </Button>\n      }\n\n    </div>;\n  }\n\n  nextStep () {\n    this.props.nextStep();\n  }\n\n  pause () {\n    this.props.playlist.pauseSearch();\n  }\n\n  resume () {\n    this.props.playlist.startSearch();\n  }\n\n  trackLabel (track) {\n    const status = track.spotifyStatus;\n    switch (status) {\n      default:\n      case 'pending':\n        return <Tag color=\"#7f8c8d\" style={{borderRadius: '500px'}}>Pending</Tag>;\n      case 'failed':\n        return <Tag color=\"#e74c3c\" style={{borderRadius: '500px'}}>Failed</Tag>;\n      case 'searching':\n        return <Tag color=\"#8e44ad\" style={{borderRadius: '500px'}}>Searching</Tag>;\n      case 'noResult':\n        return <Tag color=\"#f1c40f\" style={{borderRadius: '500px'}}>No Result</Tag>;\n      case 'withResult':\n        return <Tag color=\"#27ae60\" style={{borderRadius: '500px'}}>Found</Tag>;\n    }\n  }\n\n  statusColumn (text, row) {\n    const status = row.spotifyStatus;\n    return <div style={{display: 'flex', alignItems: 'center'}}>\n      {this.trackLabel(row)}\n      {\n        status === 'withResult' &&\n        <Button\n          style={{borderRadius: '500px'}}\n          size={'small'}\n          onClick={() => {\n            this.setState({settingsItem: row.index, settingsVisible: true});\n          }}><Icon24SettingsOutline width={20} height={20}/></Button>}\n    </div>;\n  }\n\n  settings () {\n    const {getFieldDecorator} = this.props.form;\n    return (\n      <Form\n        style={{width: 300}}\n        onSubmit={this.settingsFormSave.bind(this)}\n      >\n        <FormItem\n          label='Search Format'\n          help=\"Placeholders: {name}, {artist}, {album}, {composer}, {discCount}, {discNumber}, {genre}, {trackCount}, {trackNumber} and {year}\"\n        >\n          {getFieldDecorator('searchFormat',\n            {\n              initialValue: this.props.playlist.settings.searchFormat,\n              rules       : [{required: true, message: 'Please fill the field.'}],\n            })(\n            <Input placeholder=\"Search Format\"/>\n          )}\n        </FormItem>\n        <FormItem style={{marginBottom: 0}}>\n          <Button\n            type=\"primary\"\n            style={{width: '100%'}}\n            htmlType=\"submit\"\n          ><div display='flex'>\n          <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer'}}>\n            Done<Icon28SmileOutline width={20} height={20}  style={{marginLeft: 4}}/>\n          </div>\n        </div>\n          </Button>\n        </FormItem>\n      </Form>\n    );\n  }\n\n  settingsFormSave (e) {\n    e.preventDefault();\n    const {props} = this;\n    props.form.validateFields((errors, values) => {\n      if (!errors) {\n        each(values, (value, key) => {\n          props.playlist.option(key, value);\n        });\n      }\n    });\n  }\n\n  songSettingsModal () {\n    const {playlist} = this.props;\n    const {settingsItem} = this.state;\n    let track, data = [], selectedTrack;\n    if (this.state.settingsItem !== null) {\n      track = playlist.playlist[settingsItem];\n      selectedTrack = playlist.playlist[settingsItem].spotifySelected;\n      for (let index = 0; track.spotifyResults.length > index; index++) {\n        let spotifyTrack = track.spotifyResults[index];\n        data.push({\n          index,\n          id         : spotifyTrack.id,\n          name       : spotifyTrack.name,\n          link       : spotifyTrack.external_urls.spotify,\n          image      : spotifyTrack.album.images[1].url,\n          duration   : spotifyTrack.duration_ms / 1000,\n          trackNumber: spotifyTrack.track_number,\n          artistName : spotifyTrack.artists[0].name,\n          artistLink : spotifyTrack.artists[0].external_urls.spotify,\n          albumName  : spotifyTrack.album.name,\n          albumLink  : spotifyTrack.album.external_urls.spotify,\n          track      : spotifyTrack\n        });\n      }\n    }\n    return <Modal\n      title=\"Song Settings\"\n      visible={this.state.settingsVisible}\n      footer={null}\n      onCancel={() => {\n        this.setState({settingsVisible: false});\n        setTimeout(() => this.setState({settingsItem: null}), 200);\n      }}\n    >\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={data}\n        renderItem={item => {\n          const switchAction = <Switch\n            checked={selectedTrack.id === item.id}\n            onChange={() => {\n              playlist.setSpotifySelected(settingsItem, item.id);\n            }}/>;\n          return <List.Item actions={[switchAction]}>\n            <List.Item.Meta\n              avatar={<Avatar src={item.image} size=\"large\"/>}\n              description={<p>Album: <a href={item.albumLink}>{item.albumName}</a> - {formatSeconds(item.duration)}</p>}\n              title={<a rel=\"noopener noreferrer\" href={item.link} target=\"_blank\">{item.artistName} - {item.name}</a>}\n            />\n          </List.Item>;\n        }}\n      />\n    </Modal>;\n  }\n\n  render () {\n    return <div>\n      <div style={{maxWidth: window.innerWidth-window.innerWidth*0.3, marginRight: 'auto', marginLeft: 'auto', textAlign: 'center' }}>\n      <Row gutter={16}>\n      <Col span={12}>\n        <Card>\n          <Statistic\n            title=\"Found\"\n            value={finded}\n            precision={0}\n            valueStyle={{ color: '#3f8600' }}\n            suffix='👍'\n            style={{height: '57px'}}\n          />\n        </Card>\n      </Col>\n      <Col span={12}>\n        <Card>\n          <Statistic\n            title=\"Without result\"\n            value={failed}\n            precision={0}\n            valueStyle={{ color: '#cf1322' }}\n            suffix='👎'\n            style={{height: '57px'}}\n          />\n        </Card>\n      </Col>\n    </Row>\n      <Progress percent={completed} status=\"active\" strokeColor={{\n        '0%': '#108ee9',\n        '100%': '#87d068',\n      }} />\n      </div>\n      {this.buttons('top')}\n      <Table\n        rowKey=\"index\"\n        columns={[\n          {\n            title    : 'Status',\n            dataIndex: 'status',\n            width    : '13%',\n            render   : this.statusColumn.bind(this)\n          },\n          {\n            title    : 'Name',\n            dataIndex: 'name',\n          },\n          {\n            title    : 'Artist',\n            dataIndex: 'artist',\n          },\n          {\n            title    : 'Album',\n            dataIndex: 'album',\n          }\n        ]}\n        dataSource={this.props.playlist.playlist}\n        pagination={false}\n        bordered\n      />\n      {this.buttons('bottom')}\n      {this.songSettingsModal()}\n    </div>;\n  }\n}\n\nYandexStep3.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  nextStep: PropTypes.func.isRequired\n};\n\nexport default Form.create()(YandexStep3);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Icon28DownloadOutline from '@vkontakte/icons/dist/28/download_outline';\nimport { Upload, Card, notification, message } from 'antd';\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\nimport axios from 'axios-jsonp-pro';\n\nconst success = () => {\n  const hide = message.loading('Action in progress..', 0);\n  setTimeout(hide, 2500);\n};\n\nexport default class AppleStep1 extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = { disabled: false }\n  }\n\n  beforeUpload (file) {\n    let reader = new FileReader();\n    reader.readAsText(file, 'UTF-8');\n    reader.onload = (evt) => {\n      const text = evt.target.result;\n      try {\n        this.props.playlist.setPlaylist(text);\n        this.props.onUpload();\n      }\n      catch (error) {\n        notification.error({\n          message    : 'Error',\n          description: error.message\n        });\n      }\n    };\n    reader.onerror = function (evt) {\n      notification.error({\n        message    : 'Error',\n        description: 'Couldn\\'t read file content. Please try again.'\n      });\n    };\n    return false;\n  }\n\n  render () {\n    return <Card style={{marginRight: 'auto', marginLeft: 'auto', maxWidth: '650px', textAlign: 'center'}}>\n      <p>\n        Select your playlist in iTunes and from \"File\" menu click on \"Library\" then \"Export Playlist\". <br/>\n        Then from \"Format\" menu select \"Unicode Text\" and save the file. (must be a <code>.txt</code> file) <br/>\n        Upload this file from the following field:\n      </p>\n      <Upload beforeUpload={this.beforeUpload.bind(this)} fileList={[]}>\n        <Button before={<Icon28DownloadOutline/>} style={{color: '#1DB954', background: '#e2f1e5', cursor: 'pointer'}}>\n          Select File\n        </Button>\n      </Upload>\n      <Input\n        style={{marginTop: 12}}\n        disabled={this.state.disabled}\n        onKeyDown={async (e) => {\n          if (e.key === 'Enter') {\n            this.setState({ disabled: true })\n           try {\n            //var user; var playlistId; var app;\n            //app = 'apple'\n            var str = e.target.value\n            if (str.search(/playlist/i) > -1) {\n              str = str.split('playlist');\n              success()\n            } else {\n              this.setState({ disabled: false })\n              notification.error({\n                message    : 'Error',\n                description: 'Incorrect link. Please try again.'\n              });\n              return;\n            }\n            } catch {\n              this.setState({ disabled: false })\n              notification.error({\n                message    : 'Error',\n                description: 'Incorrect link. Please try again.'\n              });\n              return;\n            }\n          try {\n            await axios.post('https://amp-api.music.apple.com/v1/catalog/ru/playlists/pl.u-Ldbqer3sxXJqNdL?omit%5Bresource%5D=autos&views=featured-artists&extend=artistUrl%2CcomposerUrl%2CtrackCount&include=tracks&include%5Bplaylists%5D=curator&include%5Bsongs%5D=composers&fields%5Bartists%5D=name%2Curl%2Cartwork&l=en-gb', {\n                'media-user-token': 'AiASWcLRIa3uDwUI43TQmFeDMHomRXqujkGZ1M8mnHBt/WFgaFjlRwzOeq3aaSvyy1H00fZT2c5kcp1rkOO05K99vXaZhIZxgk46xxd5gS+CCEudlF8svGp5CRdOJyJuinHNi8Z8oven2gvV7TawTlSzgAacGvzsa1Ag/c3JSmgTEwypKSh7ILbHovdrc3Vd2ik6ErWKp7z8r3oTXf0a/z8WvyslXVb4x0AuT6E1nRPyR8hcmA==',\n                'Authorization': 'Bearer eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IldlYlBsYXlLaWQifQ.eyJpc3MiOiJBTVBXZWJQbGF5IiwiaWF0IjoxNjAwODgyNjE0LCJleHAiOjE2MTY0MzQ2MTR9.X2J6U95uw_3hOR6lKGS4TDnUIySZmR63yT6SshoUolXuw5zaR-0Z3taOXBiwfyomfDdJUBh0Rdo1Qt0_gSzFvA',\n                'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 11_0) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Safari/605.1.15'\n            })\n            .then((response) => {\n              console.log(response)\n              try {\n              this.props.playlist.setAppleMusic(response);\n              this.props.onUpload();\n              } catch {\n                this.setState({ disabled: false })\n                notification.error({\n                  message    : 'Error',\n                  description: response.data?.error_msg ? response.data?.error_msg : 'Server error'\n                });\n              }\n            })\n          } catch {\n            this.setState({ disabled: false })\n            notification.error({\n              message    : 'Error',\n              description: 'Your Internet connection is not stable.'\n            })\n          }\n        }\n        }} placeholder=\"https://music.apple.com/...\"/>\n    </Card>;\n  }\n}\n\nAppleStep1.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  onUpload: PropTypes.func.isRequired\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Icon28ArrowRightOutline from '@vkontakte/icons/dist/28/arrow_right_outline';\nimport { Table } from 'antd';\n\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nexport default class appleStep2 extends React.Component {\n\n  state = {\n    selectedRowKeys: []\n  };\n\n  nextStep () {\n    this.props.playlist.filter(this.state.selectedRowKeys);\n    this.props.next();\n  };\n\n  onSelectChange = (selectedRowKeys) => {\n    this.setState({selectedRowKeys});\n  };\n\n  nextStepButton () {\n    const {selectedRowKeys} = this.state;\n    const hasSelected = selectedRowKeys.length > 0;\n    return <div style={{margin: '16px 0', textAlign: 'right'}}>\n           <span style={{marginRight: 8}}>\n            {hasSelected ? `Selected ${selectedRowKeys.length} items` : ''}\n          </span>\n      <Button\n      size=\"l\" \n      style={{ background: '#d6363f', color: '#fff', borderRadius: '500px' }}\n      onClick={this.nextStep.bind(this)}\n      disabled={!hasSelected}>\n        <div\n        display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n            </div>\n          </div>\n      </Button>\n    </div>;\n  }\n\n  render () {\n    const {selectedRowKeys} = this.state;\n    const rowSelection = {\n      selectedRowKeys,\n      onChange: this.onSelectChange,\n    };\n    return (\n      <div style={{padding: '0 0'}}>\n        {this.nextStepButton()}\n        <Table\n          rowSelection={rowSelection}\n          columns={[\n            {\n              title    : 'Name',\n              dataIndex: 'name',\n            },\n            {\n              title    : 'Artist',\n              dataIndex: 'artist',\n            },\n            {\n              title    : 'Album',\n              dataIndex: 'album',\n            }\n          ]}\n          rowKey={'index'}\n          dataSource={this.props.playlist.playlist}\n          pagination={false}\n          bordered\n        />\n        {this.nextStepButton()}\n      </div>\n    );\n  }\n}\n\nappleStep2.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  next    : PropTypes.func.isRequired\n};","export const formatSeconds = (seconds) => {\n  const date = new Date(null);\n  date.setSeconds(seconds);\n  return date\n    .toISOString()\n    .substr(11, 8);\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { chunk } from 'lodash';\nimport { Card, Dropdown, Button, Menu, Form, Input, Modal, Checkbox, Table, Alert } from 'antd';\n\nimport { getPlaylists, createPlaylist, addTrackToPlaylist } from '../../services/ApiService';\n\nconst FormItem = Form.Item;\nconst {TextArea} = Input;\n\nclass appleStep4 extends React.Component {\n\n  state = {\n    playlist                  : null,\n    userPlaylists             : null,\n    fetchingPlaylists         : false,\n    isCreatingPlaylist        : false,\n    createPlaylistModalVisible: false,\n    isImporting               : false\n  };\n\n  componentDidMount () {\n    this.props.playlist.onChange(() => {\n      this.forceUpdate();\n    });\n  }\n\n  selectPlaylist () {\n    if (this.state.userPlaylists !== null) {\n      return;\n    }\n    this.setState({fetchingPlaylists: true});\n    getPlaylists()\n      .then((res) => {\n        this.setState({\n          fetchingPlaylists: false,\n          userPlaylists    : res.data\n        });\n      })\n      .catch(() => {\n        alert('Couldn\\'t get playlists. Please try again.');\n      });\n  }\n\n  selectPlaylistsMenu () {\n    return <Menu onClick={(event) => {\n      this.setState({\n        playlist: event.item.props.playlist\n      }, () => {\n        this.importSong();\n      });\n    }}>\n      {this.state.userPlaylists === null ? null : this.state.userPlaylists.items.map((playlist, index) => {\n        return <Menu.Item key={index} playlist={playlist}>\n          {playlist.name}\n        </Menu.Item>;\n      })}\n    </Menu>;\n  }\n\n  createPlaylistModal () {\n    const {getFieldDecorator} = this.props.form;\n    return <Modal\n      title=\"Create Playlist\"\n      closable={false}\n      maskClosable={true}\n      visible={this.state.createPlaylistModalVisible}\n      onCancel={() => this.setState({createPlaylistModalVisible: false})}\n      footer={[\n        <Button style={{cursor: 'pointer'}} key=\"back\" onClick={() => this.setState({createPlaylistModalVisible: false})}>Cancel</Button>,\n        <Button style={{cursor: 'pointer'}} key=\"submit\" type=\"primary\" loading={this.state.isCreatingPlaylist} onClick={this.createPlaylist.bind(this)}>\n          Create\n        </Button>,\n      ]}\n    >\n      <Form onSubmit={this.createPlaylist.bind(this)}>\n        <FormItem>\n          {getFieldDecorator('name', {\n            validateTrigger: 'onBlur',\n            rules          : [\n              {\n                required: true,\n                message : 'Please enter a name'\n              }\n            ]\n          })(\n            <Input placeholder=\"Playlist Name\"/>\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('description', {\n            initialValue: ''\n          })(\n            <TextArea autosize={true} placeholder=\"Playlist Description\"/>\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('isPublic', {\n            initialValue: true\n          })(\n            <Checkbox defaultChecked={true}>This is a public playlist!</Checkbox>\n          )}\n        </FormItem>\n      </Form>\n    </Modal>;\n  }\n\n  createPlaylist (e) {\n    if (e)\n      e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.setState({\n          isCreatingPlaylist: true\n        });\n        createPlaylist(\n          this.props.user.id,\n          values.name,\n          values.description,\n          values.isPublic\n        )\n          .then((res) => {\n            this.setState({\n              isCreatingPlaylist        : false,\n              createPlaylistModalVisible: false,\n              playlist                  : res.data\n            });\n            this.importSong();\n          })\n          .catch(() => {\n            alert(`Couldn't create the playlist. Please refresh the page.`);\n          });\n      }\n    });\n\n  }\n\n  async importSong () {\n    this.props.playlist.setSpotifyStatus('importing');\n    const songs = this.props.playlist.getPlaylist('withResult');\n    const chunks = chunk(songs, 100);\n    for (let index = 0; chunks.length > index; index++) {\n      let songsUri = [];\n      for (let songIndex = 0; chunks[index].length > songIndex; songIndex++) {\n        songsUri.push(chunks[index][songIndex].spotifySelected.uri);\n      }\n      await addTrackToPlaylist(this.props.user.id, this.state.playlist.id, songsUri);\n    }\n    this.props.playlist.setSpotifyStatus('done');\n  }\n\n  importTable () {\n    return (\n      <Table\n        loading={this.state.isImporting}\n        bordered={true}\n        rowKey=\"index\"\n        columns={[\n          {\n            title    : 'Name',\n            dataIndex: 'name',\n          },\n          {\n            title    : 'Artist',\n            dataIndex: 'artist',\n          },\n          {\n            title    : 'Album',\n            dataIndex: 'album',\n          }\n        ]}\n        dataSource={this.props.playlist.getPlaylist('withResult')}\n        pagination={false}/>\n    );\n  }\n\n  render () {\n    const {playlist} = this.props;\n    if (playlist.spotifyStatus === 'done') {\n      return <Alert\n        message=\"All Songs Imported\"\n        description={<div>\n          All songs imported. <br/>\n          <a href={this.state.playlist.external_urls.spotify}>{this.state.playlist.name}</a>\n        </div>}\n        type=\"success\"\n        showIcon\n      />;\n    }\n    return <div>\n      {this.state.playlist === null &&\n      <Card style={{marginRight: 'auto', marginLeft: 'auto', maxWidth: '650px', textAlign: 'center'}}>\n        <p>\n        Choose where you want to move the songs, to a new album or an existing one?\n        </p>\n        <Button\n          type=\"link\"\n          size={'large'}\n          onClick={() => this.setState({createPlaylistModalVisible: true})}\n          style={{marginLeft: 5, marginTop: 13, borderRadius: '500px', maxWidth: '600px', height: '45px', background: '#1DB954', color: '#fff', cursor: 'pointer'}}>\n          Create a New Playlist\n        </Button>\n        <Dropdown trigger={['click']} overlay={this.selectPlaylistsMenu()} placement=\"bottomLeft\">\n          <Button\n            type=\"link\"\n            size={'large'}\n            onClick={this.selectPlaylist.bind(this)}\n            loading={this.state.fetchingPlaylists}\n            style={{marginLeft: 5, marginTop: 13, borderRadius: '500px', maxWidth: '600px', height: '45px', background: '#1DB954', color: '#fff', cursor: 'pointer'}}>\n            Import to Existing Playlist\n          </Button>\n        </Dropdown>\n      </Card>}\n      {this.state.playlist !== null && this.importTable()}\n\n      {this.createPlaylistModal()}\n    </div>;\n  }\n}\n\nappleStep4.propTypes = {\n  user    : PropTypes.object.isRequired,\n  playlist: PropTypes.object.isRequired\n};\n\nexport default Form.create()(appleStep4);","import React from 'react';\nimport { Steps } from 'antd';\n\nimport { isLoggedIn } from '../../services/AuthService';\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\nimport { getCurrentUser } from '../../services/ApiService';\nimport AppleStep1 from './AppleStep1';\nimport AppleStep2 from './AppleStep2';\nimport AppleStep3 from './AppleStep3';\nimport AppleStep4 from './AppleStep4';\n\nexport default class Apple extends React.Component {\n\n  state = {\n    isFetching    : false,\n    isFetchingUser: false,\n    user          : null,\n    step          : 0\n  };\n\n  constructor () {\n    super();\n    this.appleMusicPlaylist = new AppleMusicPlaylist({});\n  }\n\n  componentDidMount () {\n    if (isLoggedIn()) {\n      this.setState({\n        isFetchingUser: true\n      });\n      getCurrentUser()\n        .then((res) => {\n          this.setState({\n            isFetchingUser: false,\n            user          : res.data\n          });\n        })\n        .catch(() => {\n          alert(`Couldn't fetch your data. Please refresh the page or try logging in again!`);\n        });\n    }\n  }\n\n  step1 () {\n    return <AppleStep1\n      playlist={this.appleMusicPlaylist}\n      onUpload={() => {\n        this.setState({\n          step: 1\n        });\n      }}\n    />;\n  }\n\n  step2 () {\n    return <AppleStep2\n      playlist={this.appleMusicPlaylist}\n      next={() => this.setState({step: 2})}\n    />;\n  }\n\n  step3 () {\n    return <AppleStep3\n      playlist={this.appleMusicPlaylist}\n      nextStep={() => this.setState({step: 3})}\n    />;\n  }\n\n  step4 () {\n    return <AppleStep4\n      user={this.state.user}\n      playlist={this.appleMusicPlaylist}\n    />;\n  }\n\n  content () {\n    switch (this.state.step) {\n      default:\n      case 0:\n        return this.step1();\n      case 1:\n        return this.step2();\n      case 2:\n        return this.step3();\n      case 3:\n        return this.step4();\n    }\n  }\n\n  render () {\n    const Step = Steps.Step;\n    if (!isLoggedIn()) {\n      return <h2 style={{textAlign: 'center'}}>You need to login first.</h2>;\n    }\n    if (this.state.isFetchingUser) {\n      return <p style={{textAlign: 'center'}}>Fetching your data...</p>;\n    }\n    return (\n      <div>\n        <h2 style={{ textAlign: 'center', color: '#d6514c' }}>Apple Music</h2><br/>\n        <Steps current={this.state.step}>\n          <Step title=\"Upload Playlist\" description=\"Upload playlist file\"/>\n          <Step title=\"Select Playlist Songs\" description=\"Select specific songs of the playlist to transfer\"/>\n          <Step title=\"Find Playlist Songs\" description=\"Automatic search for playlist songs on Spotify\"/>\n          <Step title=\"Import Songs\" description=\"Import playlist songs to a Spotify playlist\"/>\n        </Steps>\n        <div style={{marginTop: 50}}>\n          {this.content()}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Input } from '@vkontakte/vkui'\nimport '@vkontakte/vkui/dist/vkui.css'\nimport { Card, notification, message } from 'antd'\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist'\nimport axios from 'axios-jsonp-pro'\n\nconst success = () => {\n  const hide = message.loading('Action in progress..', 0)\n  setTimeout(hide, 2500)\n}\n\nexport default class VKStep1 extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { disabled: false }\n  }\n\n  render () {\n    return <Card style={{ marginRight: 'auto', marginLeft: 'auto', maxWidth: '650px', textAlign: 'center' }}>\n      <p>\n        Insert the album or your page link in the lower field and press Enter\n      </p>\n      <Input\n        disabled={this.state.disabled}\n        onKeyDown={async (e) => {\n          if (e.key === 'Enter') {\n            this.setState({ disabled: true })\n            try {\n              var userId; var playlistId; var access_key; var app\n              app = 'vk'\n              var str = e.target.value\n              if (str.search(/playlist/i) > -1) {\n                str = str.split('playlist')\n                str.splice(0, 1)\n                str = str[0].toString()\n                str = str.split('_')\n                userId = Number(str[0].replace(/[^-_\\d]/g, ''))\n                str = str[1].split('/')\n                playlistId = Number(str[0])\n                access_key = str[1]\n                success()\n              }\n              else if (str.search(/album/i) > -1) {\n                str = str.split('album')\n                str.splice(0, 1)\n                str = str[0].toString()\n                str = str.split('_')\n                userId = Number(str[0].replace(/[^-_\\d]/g, ''))\n                playlistId = Number(str[1])\n                access_key = str[2]\n                success()\n              }\n              else if (str.search(/audios/i) > -1) {\n                str = str.split('audios')\n                str.splice(0, 1)\n                userId = Number(str[0])\n                success()\n              }\n              else if (str.search(/id/i) > -1) {\n                str = str.split('id')\n                str.splice(0, 1)\n                userId = Number(str[0])\n                success()\n              }\n              else {\n                this.setState({ disabled: false })\n                notification.error({\n                  message: 'Error',\n                  description: 'Incorrect link. Please try again.'\n                })\n                return\n              }\n            } catch {\n              this.setState({ disabled: false })\n              notification.error({\n                message: 'Error',\n                description: 'Incorrect link. Please try again.'\n              })\n              return\n            }\n            try {\n              await axios.post('https://2spotify.dan0102dan.ru/vk', {\n                userId, playlistId, access_key, app\n              })\n                .then((response) => {\n                  try {\n                    this.props.playlist.setVKPlaylist(response)\n                    this.props.onUpload()\n                  } catch {\n                    this.setState({ disabled: false })\n                    notification.error({\n                      message: 'Error',\n                      description: response.data?.error_msg ? response.data?.error_msg : 'Server error'\n                    })\n                  }\n                })\n            } catch {\n              this.setState({ disabled: false })\n              notification.error({\n                message: 'Error',\n                description: 'Your Internet connection is not stable.'\n              })\n            }\n          }\n        }} placeholder=\"https://vk.com/...\" />\n    </Card>\n  }\n}\n\nVKStep1.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  onUpload: PropTypes.func.isRequired\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Icon28ArrowRightOutline from '@vkontakte/icons/dist/28/arrow_right_outline';\nimport { Table } from 'antd';\n\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nexport default class VKStep2 extends React.Component {\n\n  state = {\n    selectedRowKeys: []\n  };\n\n  nextStep () {\n    this.props.playlist.filter(this.state.selectedRowKeys);\n    this.props.next();\n  };\n\n  onSelectChange = (selectedRowKeys) => {\n    this.setState({selectedRowKeys});\n  };\n\n  nextStepButton () {\n    const {selectedRowKeys} = this.state;\n    const hasSelected = selectedRowKeys.length > 0;\n    return <div style={{margin: '16px 0', textAlign: 'right'}}>\n           <span style={{marginRight: 8}}>\n            {hasSelected ? `Selected ${selectedRowKeys.length} items` : ''}\n          </span>\n      <Button\n      size=\"l\" \n      style={{ background: '#d6363f', color: '#fff', borderRadius: '500px' }}\n      onClick={this.nextStep.bind(this)}\n      disabled={!hasSelected}>\n        <div\n        display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n            </div>\n          </div>\n      </Button>\n    </div>;\n  }\n\n  render () {\n    const {selectedRowKeys} = this.state;\n    const rowSelection = {\n      selectedRowKeys,\n      onChange: this.onSelectChange,\n    };\n    return (\n      <div style={{padding: '0 0'}}>\n        {this.nextStepButton()}\n        <Table\n          rowSelection={rowSelection}\n          columns={[\n            {\n              title    : 'Name',\n              dataIndex: 'name',\n            },\n            {\n              title    : 'Artist',\n              dataIndex: 'artist',\n            },\n            {\n              title    : 'Album',\n              dataIndex: 'album',\n            }\n          ]}\n          rowKey={'index'}\n          dataSource={this.props.playlist.playlist}\n          pagination={false}\n          bordered\n        />\n        {this.nextStepButton()}\n      </div>\n    );\n  }\n}\n\nVKStep2.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  next    : PropTypes.func.isRequired\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { chunk } from 'lodash';\nimport { Card, Dropdown, Button, Menu, Form, Input, Modal, Checkbox, Table, Alert } from 'antd';\n\nimport { getPlaylists, createPlaylist, addTrackToPlaylist } from '../../services/ApiService';\n\nconst FormItem = Form.Item;\nconst {TextArea} = Input;\n\nclass VKStep4 extends React.Component {\n\n  state = {\n    playlist                  : null,\n    userPlaylists             : null,\n    fetchingPlaylists         : false,\n    isCreatingPlaylist        : false,\n    createPlaylistModalVisible: false,\n    isImporting               : false\n  };\n\n  componentDidMount () {\n    this.props.playlist.onChange(() => {\n      this.forceUpdate();\n    });\n  }\n\n  selectPlaylist () {\n    if (this.state.userPlaylists !== null) {\n      return;\n    }\n    this.setState({fetchingPlaylists: true});\n    getPlaylists()\n      .then((res) => {\n        this.setState({\n          fetchingPlaylists: false,\n          userPlaylists    : res.data\n        });\n      })\n      .catch(() => {\n        alert('Couldn\\'t get playlists. Please try again.');\n      });\n  }\n\n  selectPlaylistsMenu () {\n    return <Menu onClick={(event) => {\n      this.setState({\n        playlist: event.item.props.playlist\n      }, () => {\n        this.importSong();\n      });\n    }}>\n      {this.state.userPlaylists === null ? null : this.state.userPlaylists.items.map((playlist, index) => {\n        return <Menu.Item key={index} playlist={playlist}>\n          {playlist.name}\n        </Menu.Item>;\n      })}\n    </Menu>;\n  }\n\n  createPlaylistModal () {\n    const {getFieldDecorator} = this.props.form;\n    return <Modal\n      title=\"Create Playlist\"\n      closable={false}\n      maskClosable={true}\n      visible={this.state.createPlaylistModalVisible}\n      onCancel={() => this.setState({createPlaylistModalVisible: false})}\n      footer={[\n        <Button style={{cursor: 'pointer'}} key=\"back\" onClick={() => this.setState({createPlaylistModalVisible: false})}>Cancel</Button>,\n        <Button style={{cursor: 'pointer'}} key=\"submit\" type=\"primary\" loading={this.state.isCreatingPlaylist} onClick={this.createPlaylist.bind(this)}>\n          Create\n        </Button>,\n      ]}\n    >\n      <Form onSubmit={this.createPlaylist.bind(this)}>\n        <FormItem>\n          {getFieldDecorator('name', {\n            validateTrigger: 'onBlur',\n            rules          : [\n              {\n                required: true,\n                message : 'Please enter a name'\n              }\n            ]\n          })(\n            <Input placeholder=\"Playlist Name\"/>\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('description', {\n            initialValue: ''\n          })(\n            <TextArea autosize={true} placeholder=\"Playlist Description\"/>\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('isPublic', {\n            initialValue: true\n          })(\n            <Checkbox defaultChecked={true}>This is a public playlist!</Checkbox>\n          )}\n        </FormItem>\n      </Form>\n    </Modal>;\n  }\n\n  createPlaylist (e) {\n    if (e)\n      e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.setState({\n          isCreatingPlaylist: true\n        });\n        createPlaylist(\n          this.props.user.id,\n          values.name,\n          values.description,\n          values.isPublic\n        )\n          .then((res) => {\n            this.setState({\n              isCreatingPlaylist        : false,\n              createPlaylistModalVisible: false,\n              playlist                  : res.data\n            });\n            this.importSong();\n          })\n          .catch(() => {\n            alert(`Couldn't create the playlist. Please refresh the page.`);\n          });\n      }\n    });\n\n  }\n\n  async importSong () {\n    this.props.playlist.setSpotifyStatus('importing');\n    const songs = this.props.playlist.getPlaylist('withResult');\n    const chunks = chunk(songs, 100);\n    for (let index = 0; chunks.length > index; index++) {\n      let songsUri = [];\n      for (let songIndex = 0; chunks[index].length > songIndex; songIndex++) {\n        songsUri.push(chunks[index][songIndex].spotifySelected.uri);\n      }\n      await addTrackToPlaylist(this.props.user.id, this.state.playlist.id, songsUri);\n    }\n    this.props.playlist.setSpotifyStatus('done');\n  }\n\n  importTable () {\n    return (\n      <Table\n        loading={this.state.isImporting}\n        bordered={true}\n        rowKey=\"index\"\n        columns={[\n          {\n            title    : 'Name',\n            dataIndex: 'name',\n          },\n          {\n            title    : 'Artist',\n            dataIndex: 'artist',\n          },\n          {\n            title    : 'Album',\n            dataIndex: 'album',\n          }\n        ]}\n        dataSource={this.props.playlist.getPlaylist('withResult')}\n        pagination={false}/>\n    );\n  }\n\n  render () {\n    const {playlist} = this.props;\n    if (playlist.spotifyStatus === 'done') {\n      return <Alert\n        message=\"All Songs Imported\"\n        description={<div>\n          All songs imported. <br/>\n          <a href={this.state.playlist.external_urls.spotify}>{this.state.playlist.name}</a>\n        </div>}\n        type=\"success\"\n        showIcon\n      />;\n    }\n    return <div>\n      {this.state.playlist === null &&\n      <Card style={{marginRight: 'auto', marginLeft: 'auto', maxWidth: '650px', textAlign: 'center'}}>\n        <p>\n        Choose where you want to move the songs, to a new album or an existing one?\n        </p>\n        <Button\n          type=\"link\"\n          size={'large'}\n          onClick={() => this.setState({createPlaylistModalVisible: true})}\n          style={{marginLeft: 5, marginTop: 13, borderRadius: '500px', maxWidth: '600px', height: '45px', background: '#1DB954', color: '#fff', cursor: 'pointer'}}>\n          Create a New Playlist\n        </Button>\n        <Dropdown trigger={['click']} overlay={this.selectPlaylistsMenu()} placement=\"bottomLeft\">\n          <Button\n            type=\"link\"\n            size={'large'}\n            onClick={this.selectPlaylist.bind(this)}\n            loading={this.state.fetchingPlaylists}\n            style={{marginLeft: 5, marginTop: 13, borderRadius: '500px', maxWidth: '600px', height: '45px', background: '#1DB954', color: '#fff', cursor: 'pointer'}}>\n            Import to Existing Playlist\n          </Button>\n        </Dropdown>\n      </Card>}\n      {this.state.playlist !== null && this.importTable()}\n\n      {this.createPlaylistModal()}\n    </div>;\n  }\n}\n\nVKStep4.propTypes = {\n  user    : PropTypes.object.isRequired,\n  playlist: PropTypes.object.isRequired\n};\n\nexport default Form.create()(VKStep4);","import React from 'react';\nimport { Steps } from 'antd';\n\nimport { isLoggedIn } from '../../services/AuthService';\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\nimport { getCurrentUser } from '../../services/ApiService';\nimport VKStep1 from './VKStep1';\nimport VKStep2 from './VKStep2';\nimport VKStep3 from './VKStep3';\nimport VKStep4 from './VKStep4';\n\nexport default class VK extends React.Component {\n\n  state = {\n    isFetching    : false,\n    isFetchingUser: false,\n    user          : null,\n    step          : 0\n  };\n\n  constructor () {\n    super();\n    this.appleMusicPlaylist = new AppleMusicPlaylist({});\n  }\n\n  componentDidMount () {\n    if (isLoggedIn()) {\n      this.setState({\n        isFetchingUser: true\n      });\n      getCurrentUser()\n        .then((res) => {\n          this.setState({\n            isFetchingUser: false,\n            user          : res.data\n          });\n        })\n        .catch(() => {\n          alert(`Couldn't fetch your data. Please refresh the page or try logging in again!`);\n        });\n    }\n  }\n\n  step1 () {\n    return <VKStep1\n      playlist={this.appleMusicPlaylist}\n      onUpload={() => {\n        this.setState({\n          step: 1\n        });\n      }}\n    />;\n  }\n\n  step2 () {\n    return <VKStep2\n      playlist={this.appleMusicPlaylist}\n      next={() => this.setState({step: 2})}\n    />;\n  }\n\n  step3 () {\n    return <VKStep3\n      playlist={this.appleMusicPlaylist}\n      nextStep={() => this.setState({step: 3})}\n    />;\n  }\n\n  step4 () {\n    return <VKStep4\n      user={this.state.user}\n      playlist={this.appleMusicPlaylist}\n    />;\n  }\n\n  content () {\n    switch (this.state.step) {\n      default:\n      case 0:\n        return this.step1();\n      case 1:\n        return this.step2();\n      case 2:\n        return this.step3();\n      case 3:\n        return this.step4();\n    }\n  }\n\n  render () {\n    const Step = Steps.Step;\n    if (!isLoggedIn()) {\n      return <h2 style={{textAlign: 'center'}}>You need to login first.</h2>;\n    }\n    if (this.state.isFetchingUser) {\n      return <p style={{textAlign: 'center'}}>Fetching your data...</p>;\n    }\n    return (\n      <div>\n        <h2 style={{ textAlign: 'center', color: '#374ed3' }}>VK Music</h2><br/>\n        <Steps current={this.state.step}>\n          <Step title=\"Upload Playlist\" description=\"Insert the link\"/>\n          <Step title=\"Select Playlist Songs\" description=\"Select specific songs of the playlist to transfer\"/>\n          <Step title=\"Find Playlist Songs\" description=\"Automatic search for playlist songs on Spotify\"/>\n          <Step title=\"Import Songs\" description=\"Import playlist songs to a Spotify playlist\"/>\n        </Steps>\n        <div style={{marginTop: 50}}>\n          {this.content()}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Input } from '@vkontakte/vkui'\nimport '@vkontakte/vkui/dist/vkui.css'\nimport { Card, notification, message } from 'antd'\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist'\nimport axios from 'axios-jsonp-pro'\n\nconst success = () => {\n  const hide = message.loading('Action in progress..', 0)\n  setTimeout(hide, 2500)\n}\n\nexport default class YandexStep1 extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { disabled: false }\n  }\n\n  render () {\n    return <Card style={{ marginRight: 'auto', marginLeft: 'auto', maxWidth: '650px', textAlign: 'center' }}>\n      <p>\n        Insert the playlist link in the lower field and press Enter\n      </p>\n      <Input\n        disabled={this.state.disabled}\n        onKeyDown={async (e) => {\n          if (e.key === 'Enter') {\n            this.setState({ disabled: true })\n            try {\n              var user; var playlistId; var app\n              app = 'yandex'\n              var str = e.target.value\n              if (str.search(/playlist/i) > -1) {\n                str = str.split('playlist')\n                playlistId = Number(str[1].replace(/[^\\d]/g, ''))\n                str.splice(1, 1); str = str[0]\n                str = str.split('users')\n                user = str[1].replace(/\\//g, '')\n                success()\n              } else {\n                this.setState({ disabled: false })\n                notification.error({\n                  message: 'Error',\n                  description: 'Incorrect link. Please try again.'\n                })\n                return\n              }\n            } catch {\n              this.setState({ disabled: false })\n              notification.error({\n                message: 'Error',\n                description: 'Incorrect link. Please try again.'\n              })\n              return\n            }\n            try {\n              await axios.post('https://2spotify.dan0102dan.ru/yandex', {\n                user, playlistId, app\n              })\n                .then((response) => {\n                  try {\n                    this.props.playlist.setYandexPlaylist(response)\n                    this.props.onUpload()\n                  } catch {\n                    this.setState({ disabled: false })\n                    notification.error({\n                      message: 'Error',\n                      description: response.data?.error_msg ? response.data?.error_msg : 'Server error'\n                    })\n                  }\n                })\n            } catch {\n              this.setState({ disabled: false })\n              notification.error({\n                message: 'Error',\n                description: 'Your Internet connection is not stable.'\n              })\n            }\n          }\n        }} placeholder=\"https://music.yandex.ru/users/...\" />\n    </Card>\n  }\n}\n\nYandexStep1.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  onUpload: PropTypes.func.isRequired\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Icon28ArrowRightOutline from '@vkontakte/icons/dist/28/arrow_right_outline';\nimport { Table } from 'antd';\n\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nexport default class YandexStep2 extends React.Component {\n\n  state = {\n    selectedRowKeys: []\n  };\n\n  nextStep () {\n    this.props.playlist.filter(this.state.selectedRowKeys);\n    this.props.next();\n  };\n\n  onSelectChange = (selectedRowKeys) => {\n    this.setState({selectedRowKeys});\n  };\n\n  nextStepButton () {\n    const {selectedRowKeys} = this.state;\n    const hasSelected = selectedRowKeys.length > 0;\n    return <div style={{margin: '16px 0', textAlign: 'right'}}>\n           <span style={{marginRight: 8}}>\n            {hasSelected ? `Selected ${selectedRowKeys.length} items` : ''}\n          </span>\n      <Button\n      size=\"l\" \n      style={{ background: '#d6363f', color: '#fff', borderRadius: '500px' }}\n      onClick={this.nextStep.bind(this)}\n      disabled={!hasSelected}>\n        <div\n        display='flex'>\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n          Next Step<Icon28ArrowRightOutline style={{marginLeft: 4}}/>\n            </div>\n          </div>\n      </Button>\n    </div>;\n  }\n\n  render () {\n    const {selectedRowKeys} = this.state;\n    const rowSelection = {\n      selectedRowKeys,\n      onChange: this.onSelectChange,\n    };\n    return (\n      <div style={{padding: '0 0'}}>\n        {this.nextStepButton()}\n        <Table\n          rowSelection={rowSelection}\n          columns={[\n            {\n              title    : 'Name',\n              dataIndex: 'name',\n            },\n            {\n              title    : 'Artist',\n              dataIndex: 'artist',\n            },\n            {\n              title    : 'Album',\n              dataIndex: 'album',\n            }\n          ]}\n          rowKey={'index'}\n          dataSource={this.props.playlist.playlist}\n          pagination={false}\n          bordered\n        />\n        {this.nextStepButton()}\n      </div>\n    );\n  }\n}\n\nYandexStep2.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  next    : PropTypes.func.isRequired\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { chunk } from 'lodash';\nimport { Card, Dropdown, Button, Menu, Form, Input, Modal, Checkbox, Table, Alert } from 'antd';\n\nimport { getPlaylists, createPlaylist, addTrackToPlaylist } from '../../services/ApiService';\n\nconst FormItem = Form.Item;\nconst {TextArea} = Input;\n\nclass YandexStep4 extends React.Component {\n\n  state = {\n    playlist                  : null,\n    userPlaylists             : null,\n    fetchingPlaylists         : false,\n    isCreatingPlaylist        : false,\n    createPlaylistModalVisible: false,\n    isImporting               : false\n  };\n\n  componentDidMount () {\n    this.props.playlist.onChange(() => {\n      this.forceUpdate();\n    });\n  }\n\n  selectPlaylist () {\n    if (this.state.userPlaylists !== null) {\n      return;\n    }\n    this.setState({fetchingPlaylists: true});\n    getPlaylists()\n      .then((res) => {\n        this.setState({\n          fetchingPlaylists: false,\n          userPlaylists    : res.data\n        });\n      })\n      .catch(() => {\n        alert('Couldn\\'t get playlists. Please try again.');\n      });\n  }\n\n  selectPlaylistsMenu () {\n    return <Menu onClick={(event) => {\n      this.setState({\n        playlist: event.item.props.playlist\n      }, () => {\n        this.importSong();\n      });\n    }}>\n      {this.state.userPlaylists === null ? null : this.state.userPlaylists.items.map((playlist, index) => {\n        return <Menu.Item key={index} playlist={playlist}>\n          {playlist.name}\n        </Menu.Item>;\n      })}\n    </Menu>;\n  }\n\n  createPlaylistModal () {\n    const {getFieldDecorator} = this.props.form;\n    return <Modal\n      title=\"Create Playlist\"\n      closable={false}\n      maskClosable={true}\n      visible={this.state.createPlaylistModalVisible}\n      onCancel={() => this.setState({createPlaylistModalVisible: false})}\n      footer={[\n        <Button style={{cursor: 'pointer'}} key=\"back\" onClick={() => this.setState({createPlaylistModalVisible: false})}>Cancel</Button>,\n        <Button style={{cursor: 'pointer'}} key=\"submit\" type=\"primary\" loading={this.state.isCreatingPlaylist} onClick={this.createPlaylist.bind(this)}>\n          Create\n        </Button>,\n      ]}\n    >\n      <Form onSubmit={this.createPlaylist.bind(this)}>\n        <FormItem>\n          {getFieldDecorator('name', {\n            validateTrigger: 'onBlur',\n            rules          : [\n              {\n                required: true,\n                message : 'Please enter a name'\n              }\n            ]\n          })(\n            <Input placeholder=\"Playlist Name\"/>\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('description', {\n            initialValue: ''\n          })(\n            <TextArea autosize={true} placeholder=\"Playlist Description\"/>\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('isPublic', {\n            initialValue: true\n          })(\n            <Checkbox defaultChecked={true}>This is a public playlist!</Checkbox>\n          )}\n        </FormItem>\n      </Form>\n    </Modal>;\n  }\n\n  createPlaylist (e) {\n    if (e)\n      e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.setState({\n          isCreatingPlaylist: true\n        });\n        createPlaylist(\n          this.props.user.id,\n          values.name,\n          values.description,\n          values.isPublic\n        )\n          .then((res) => {\n            this.setState({\n              isCreatingPlaylist        : false,\n              createPlaylistModalVisible: false,\n              playlist                  : res.data\n            });\n            this.importSong();\n          })\n          .catch(() => {\n            alert(`Couldn't create the playlist. Please refresh the page.`);\n          });\n      }\n    });\n\n  }\n\n  async importSong () {\n    this.props.playlist.setSpotifyStatus('importing');\n    const songs = this.props.playlist.getPlaylist('withResult');\n    const chunks = chunk(songs, 100);\n    for (let index = 0; chunks.length > index; index++) {\n      let songsUri = [];\n      for (let songIndex = 0; chunks[index].length > songIndex; songIndex++) {\n        songsUri.push(chunks[index][songIndex].spotifySelected.uri);\n      }\n      await addTrackToPlaylist(this.props.user.id, this.state.playlist.id, songsUri);\n    }\n    this.props.playlist.setSpotifyStatus('done');\n  }\n\n  importTable () {\n    return (\n      <Table\n        loading={this.state.isImporting}\n        bordered={true}\n        rowKey=\"index\"\n        columns={[\n          {\n            title    : 'Name',\n            dataIndex: 'name',\n          },\n          {\n            title    : 'Artist',\n            dataIndex: 'artist',\n          },\n          {\n            title    : 'Album',\n            dataIndex: 'album',\n          }\n        ]}\n        dataSource={this.props.playlist.getPlaylist('withResult')}\n        pagination={false}/>\n    );\n  }\n\n  render () {\n    const {playlist} = this.props;\n    if (playlist.spotifyStatus === 'done') {\n      return <Alert\n        message=\"All Songs Imported\"\n        description={<div>\n          All songs imported. <br/>\n          <a href={this.state.playlist.external_urls.spotify}>{this.state.playlist.name}</a>\n        </div>}\n        type=\"success\"\n        showIcon\n      />;\n    }\n    return <div>\n      {this.state.playlist === null &&\n      <Card style={{marginRight: 'auto', marginLeft: 'auto', maxWidth: '650px', textAlign: 'center'}}>\n        <p>\n        Choose where you want to move the songs, to a new album or an existing one?\n        </p>\n        <Button\n          type=\"link\"\n          size={'large'}\n          onClick={() => this.setState({createPlaylistModalVisible: true})}\n          style={{marginLeft: 5, marginTop: 13, borderRadius: '500px', maxWidth: '600px', height: '45px', background: '#1DB954', color: '#fff', cursor: 'pointer'}}>\n          Create a New Playlist\n        </Button>\n        <Dropdown trigger={['click']} overlay={this.selectPlaylistsMenu()} placement=\"bottomLeft\">\n          <Button\n            type=\"link\"\n            size={'large'}\n            onClick={this.selectPlaylist.bind(this)}\n            loading={this.state.fetchingPlaylists}\n            style={{marginLeft: 5, marginTop: 13, borderRadius: '500px', maxWidth: '600px', height: '45px', background: '#1DB954', color: '#fff', cursor: 'pointer'}}>\n            Import to Existing Playlist\n          </Button>\n        </Dropdown>\n      </Card>}\n      {this.state.playlist !== null && this.importTable()}\n\n      {this.createPlaylistModal()}\n    </div>;\n  }\n}\n\nYandexStep4.propTypes = {\n  user    : PropTypes.object.isRequired,\n  playlist: PropTypes.object.isRequired\n};\n\nexport default Form.create()(YandexStep4);","import React from 'react';\nimport { Steps } from 'antd';\n\nimport { isLoggedIn } from '../../services/AuthService';\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\nimport { getCurrentUser } from '../../services/ApiService';\nimport YandexStep1 from './YandexStep1';\nimport YandexStep2 from './YandexStep2';\nimport YandexStep3 from './YandexStep3';\nimport YandexStep4 from './YandexStep4';\n\nexport default class Apple extends React.Component {\n\n  state = {\n    isFetching    : false,\n    isFetchingUser: false,\n    user          : null,\n    step          : 0\n  };\n\n  constructor () {\n    super();\n    this.appleMusicPlaylist = new AppleMusicPlaylist({});\n  }\n\n  componentDidMount () {\n    if (isLoggedIn()) {\n      this.setState({\n        isFetchingUser: true\n      });\n      getCurrentUser()\n        .then((res) => {\n          this.setState({\n            isFetchingUser: false,\n            user          : res.data\n          });\n        })\n        .catch(() => {\n          alert(`Couldn't fetch your data. Please refresh the page or try logging in again!`);\n        });\n    }\n  }\n\n  step1 () {\n    return <YandexStep1\n      playlist={this.appleMusicPlaylist}\n      onUpload={() => {\n        this.setState({\n          step: 1\n        });\n      }}\n    />;\n  }\n\n  step2 () {\n    return <YandexStep2\n      playlist={this.appleMusicPlaylist}\n      next={() => this.setState({step: 2})}\n    />;\n  }\n\n  step3 () {\n    return <YandexStep3\n      playlist={this.appleMusicPlaylist}\n      nextStep={() => this.setState({step: 3})}\n    />;\n  }\n\n  step4 () {\n    return <YandexStep4\n      user={this.state.user}\n      playlist={this.appleMusicPlaylist}\n    />;\n  }\n\n  content () {\n    switch (this.state.step) {\n      default:\n      case 0:\n        return this.step1();\n      case 1:\n        return this.step2();\n      case 2:\n        return this.step3();\n      case 3:\n        return this.step4();\n    }\n  }\n\n  render () {\n    const Step = Steps.Step;\n    if (!isLoggedIn()) {\n      return <h2 style={{textAlign: 'center'}}>You need to login first.</h2>;\n    }\n    if (this.state.isFetchingUser) {\n      return <p style={{textAlign: 'center'}}>Fetching your data...</p>;\n    }\n    return (\n      <div>\n        <h2 style={{ textAlign: 'center', color: 'rgb(248, 219)' }}>Yandex</h2><br/>\n        <Steps current={this.state.step}>\n        <Step title=\"Upload Playlist\" description=\"Insert the link\"/>\n          <Step title=\"Select Playlist Songs\" description=\"Select specific songs of the playlist to transfer\"/>\n          <Step title=\"Find Playlist Songs\" description=\"Automatic search for playlist songs on Spotify\"/>\n          <Step title=\"Import Songs\" description=\"Import playlist songs to a Spotify playlist\"/>\n        </Steps>\n        <div style={{marginTop: 50}}>\n          {this.content()}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { parse } from 'qs';\n\nimport { setToken } from '../services/AuthService';\n\nclass LoginCallback extends React.Component {\n\n  componentDidMount () {\n    setToken(\n      parse(this.props.location.hash.slice(1)).access_token\n    );\n    this.props.history.push('/');\n  }\n\n  render () {\n    return (\n      <span>...</span>\n    );\n  }\n}\n\nexport default withRouter(LoginCallback);","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport * as RouteConstants from '../constants/RouteConstants';\n\nimport Home from './Home';\nimport Apple from './apple/Apple';\nimport VK from './vk/fetchdata';\nimport Yandex from './yandex/Yandex';\nimport LoginCallback from './LoginCallback';\n\nexport default class Routes extends React.Component {\n  render () {\n    return (\n      <Switch>\n        <Route exact path={RouteConstants.HOME} component={Home}/>\n        <Route path={RouteConstants.APPlE} component={Apple}/>\n        <Route path={RouteConstants.VK} component={VK}/>\n        <Route path={RouteConstants.YANDEX} component={Yandex}/>\n        <Route path={RouteConstants.LOGIN_CALLBACK} component={LoginCallback}/>\n      </Switch>\n    );\n  }\n}","import React, { Component } from 'react';\nimport { Layout } from 'antd';\n\nimport Header from './components/shared/Header';\nimport Routes from './components/Routes';\n\nimport 'antd/dist/antd.css';\nimport 'sanitize.css';\nimport './styles.css';\n\nclass App extends Component {\n  render () {\n    return (\n      <Layout>\n        <Header/>\n        <div id='content'>\n          <div className='container'>\n            <Routes/>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <Router basename={'/2spotify'}>\n    <App/>\n  </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}