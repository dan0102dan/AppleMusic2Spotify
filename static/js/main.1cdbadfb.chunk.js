(this.webpackJsonp2spotify=this.webpackJsonp2spotify||[]).push([[0],{365:function(e,t,a){e.exports=a(634)},633:function(e,t,a){},634:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(5),r=a.n(s),l=a(62),o=a(15),c=a(16),u=a(18),p=a(17),d=a(640),m=a(635),h=a(648),y=a(37),f=a(25),g="https://api.spotify.com",b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["playlist-read-private","playlist-read-collaborative","playlist-modify-public","playlist-modify-private","user-library-read","user-library-modify","user-top-read"],t=[];return t.push("client_id=".concat("b1a70e47e2fa4e01bc095a4098cbcb0a")),t.push("response_type=token"),t.push("redirect_uri=".concat(encodeURIComponent("".concat(window.location.protocol,"//").concat(window.location.host,"/2spotify/login-callback")))),t.push("scope=".concat(e.join(" "))),"https://accounts.spotify.com/authorize/?".concat(t.join("&"))},v=function(){return null!==localStorage.getItem("__token")},E=function(){return localStorage.getItem("__token")},x=a(71),k=a.n(x),S=function e(){return"undefined"===typeof e.instance&&(e.instance=k.a.create({headers:{Authorization:"Bearer ".concat(E())}})),e.instance},C=function(){return S().get("".concat(g,"/v1/me"))},P=function(){return S().get("".concat(g,"/v1/me/playlists"))},w=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return S().post("".concat(g,"/v1/users/").concat(e,"/playlists"),{name:t,description:a,public:n})},R=function(e,t,a){return S().post("".concat(g,"/v1/users/").concat(e,"/playlists/").concat(t,"/tracks"),{uris:a})},I=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={name:""},n.state={photo:""},n.state={isFetchingUser:!1},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.state.isFetchingUser||v()&&C().then((function(t){e.setState({isFetchingUser:!0,photo:t.data.images[0].url,name:t.data.display_name})})).catch((function(){m.a.error("Authorisation error")}))}},{key:"render",value:function(){return i.a.createElement(h.a,{title:"2 Spotify",subTitle:this.state.isFetchingUser?"Hello, ".concat(this.state.name,"!"):"Hello, friend!",extra:[i.a.createElement(y.a,{key:"/",type:"link",style:{marginTop:"6px",marginLeft:"8px",border:"1px solid transparent",borderColor:"#d9d9d9",borderRadius:"4px",color:"#000"}},i.a.createElement(l.b,{to:"/"},"Home")),i.a.createElement(y.a,{id:"AppleButton",key:"/apple",type:"link",style:{marginTop:"6px",marginLeft:"8px"}},i.a.createElement(l.b,{to:"/apple"},"Apple Music")),i.a.createElement(y.a,{id:"VKButton",key:"/vk",type:"link",style:{marginTop:"6px",marginLeft:"8px"}},i.a.createElement(l.b,{to:"/vk"},"Boom (VK)")),i.a.createElement(y.a,{id:"YandexButton",key:"/yandex",type:"link",style:{marginTop:"6px",marginLeft:"8px"}},i.a.createElement(l.b,{to:"/yandex"},"Yandex"))],avatar:this.state.isFetchingUser?{src:this.state.photo}:null})}}]),a}(i.a.Component),j=Object(f.f)(I),O=a(34),A=(a(58),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"logout",value:function(){localStorage.removeItem("__token"),this.forceUpdate()}},{key:"loginMessage",value:function(){return i.a.createElement("div",{className:"button"},v()?i.a.createElement(O.a,{size:"l",style:{background:"rgb(240, 54, 63)",color:"#fff",display:"flex",margin:"0 auto",width:"202px",height:"53px",borderRadius:"500px",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:this.logout.bind(this)},"Logout"):i.a.createElement(O.a,{size:"l",style:{background:"#1DB954",color:"#fff",display:"flex",margin:"0 auto",width:"202px",height:"53px",borderRadius:"500px",alignItems:"center",justifyContent:"center",cursor:"pointer"},href:b()},"Login"))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",{style:{textAlign:"center"}},"2 Spotify ",i.a.createElement("span",{role:"img","aria-label":"music"},"\ud83c\udfb8")),i.a.createElement("h2",{style:{textAlign:"center"}},"This tool will help you transfer your playlists from any service to Spotify."),this.loginMessage())}}]),a}(i.a.Component)),T=a(649),M=a(197),F=a(281),N=a(263),L=a.n(N),_=a(264),D=a.n(_),z=a(40);D()(k.a);var U,V,K,B,W,Y,J,q,X,H=function(){function e(t){Object(o.a)(this,e),this._playlist=[],this.changeCallbacks=[],this.spotifyStatus=null,this.settings=Object(F.a)({searchFormat:"{name} {artist}"},t)}return Object(c.a)(e,[{key:"setPlaylist",value:function(e){var t=L.a.parse(e,{header:!0});if(t.errors.length&&!t.data.length)throw new Error("Couldn't parse the playlist.");t.data.pop();for(var a=0;t.data.length>a;a++){var n=t.data[a],i=Object.keys(n);if(!i.includes("Name")||!i.includes("Artist")||!i.includes("Album"))throw new Error("Playlist is not a valid apple music playlist.");this._playlist.push({index:a,name:n.Name,artist:n.Artist,album:n.Album,composer:n.Composer,discCount:n["Disc Count"],discNumber:n["Disc Number"],genre:n.Genre,trackCount:n["Track Count"],trackNumber:n["Track Number"],year:n.Year,spotifyStatus:"pending",spotifyResults:null,spotifySelected:null})}}},{key:"setAppleMusic",value:function(e){var t,a=0,n=Object(M.a)(e.data.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._playlist.push({index:a,name:i.title,artist:i.artist,discCount:"1",discNumber:"1",year:new Date(1e3*i.date).getFullYear(),spotifyStatus:"pending",spotifyResults:null,spotifySelected:null}),a++}}catch(s){n.e(s)}finally{n.f()}}},{key:"setVKPlaylist",value:function(e){var t,a=0,n=Object(M.a)(e.data.items);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._playlist.push({index:a,name:i.title,artist:i.artist,discCount:"1",discNumber:"1",year:new Date(1e3*i.date).getFullYear(),spotifyStatus:"pending",spotifyResults:null,spotifySelected:null}),a++}}catch(s){n.e(s)}finally{n.f()}}},{key:"setYandexPlaylist",value:function(e){this._playlist=e.data}},{key:"filter",value:function(e){for(var t=[],a=0;e.length>a;a++)t.push(this._playlist[e[a]]);this._playlist=t}},{key:"getPlaylist",value:function(e){for(var t=[],a=0;this._playlist.length>a;a++)this._playlist[a].spotifyStatus===e&&t.push(this._playlist[a]);return t}},{key:"setSpotifySelected",value:function(e,t){var a=this._playlist[e],n=Object(z.findIndex)(a.spotifyResults,{id:t});return a.spotifySelected=a.spotifyResults[n],this.triggerChange(),this}},{key:"setSpotifyStatus",value:function(e){return this.spotifyStatus=e,this.triggerChange(),this}},{key:"onChange",value:function(e){this.changeCallbacks.push(e)}},{key:"triggerChange",value:function(){for(var e=0;this.changeCallbacks.length>e;e++)this.changeCallbacks[e]()}},{key:"startSearch",value:function(){this.searchTimeout=setTimeout(this._search.bind(this),1)}},{key:"searchKeyword",value:function(e){for(var t=["{name}","{artist}","{album}","{composer}","{discCount}","{discNumber}","{genre}","{trackCount}","{trackNumber}","{year}"],a=this.settings.searchFormat,n=0;t.length>n;n++)a=a.replace(t[n],e[t[n].slice(1,-1)]);return a}},{key:"option",value:function(e,t){return this.settings[e]=t,this}},{key:"_search",value:function(){for(var e,t=this,a=0;this._playlist.length>a;a++)if("pending"===this._playlist[a].spotifyStatus){e=this._playlist[a];break}if(!e)return this.spotifyStatus="searchComplete",void this.triggerChange();this.spotifyStatus="searching",e.spotifyStatus="searching",this.triggerChange(),k.a.get("".concat(g,"/v1/search"),{requestId:"search",headers:{Authorization:"Bearer ".concat(E())},params:{type:"track",q:this.searchKeyword(e),limit:10}}).then((function(a){e.spotifyStatus=0===a.data.tracks.total?"noResult":"withResult",e.spotifyResults=a.data.tracks.items,a.data.tracks.total&&(e.spotifySelected=a.data.tracks.items[0]),t.searchTimeout=setTimeout(t._search.bind(t),10)})).catch((function(t){e.spotifyStatus=k.a.isCancel(t)?"pending":"failed"})).finally((function(){t.triggerChange()}))}},{key:"pauseSearch",value:function(){this.spotifyStatus="paused",clearTimeout(this.searchTimeout),this.triggerChange(),k.a.cancel("search")}},{key:"playlist",get:function(){return this._playlist}}]),e}(),Z=a(31),G=a.n(Z),Q=a(47),$=a(265),ee=a.n($),te=a(636),ae=a(641),ne=a(643),ie=a(92),se=a.n(ie),re=function(){var e=m.a.loading("Action in progress..",0);setTimeout(e,2500)},le=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={disabled:!1},n}return Object(c.a)(a,[{key:"beforeUpload",value:function(e){var t=this,a=new FileReader;return a.readAsText(e,"UTF-8"),a.onload=function(e){var a=e.target.result;try{t.props.playlist.setPlaylist(a),t.props.onUpload()}catch(n){te.a.error({message:"Error",description:n.message})}},a.onerror=function(e){te.a.error({message:"Error",description:"Couldn't read file content. Please try again."})},!1}},{key:"render",value:function(){var e=this;return i.a.createElement(ae.a,{style:{marginRight:"auto",marginLeft:"auto",maxWidth:"650px",textAlign:"center"}},i.a.createElement("p",null,'Select your playlist in iTunes and from "File" menu click on "Library" then "Export Playlist". ',i.a.createElement("br",null),'Then from "Format" menu select "Unicode Text" and save the file. (must be a ',i.a.createElement("code",null,".txt")," file) ",i.a.createElement("br",null),"Upload this file from the following field:"),i.a.createElement(ne.a,{beforeUpload:this.beforeUpload.bind(this),fileList:[]},i.a.createElement(O.a,{before:i.a.createElement(ee.a,null),style:{color:"#1DB954",background:"#e2f1e5",cursor:"pointer"}},"Select File")),i.a.createElement(O.b,{style:{marginTop:12},disabled:this.state.disabled,onKeyDown:function(){var t=Object(Q.a)(G.a.mark((function t(a){var n;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==a.key){t.next=28;break}if(e.setState({disabled:!0}),t.prev=2,!((n=a.target.value).search(/playlist/i)>-1)){t.next=9;break}n=n.split("playlist"),re(),t.next=12;break;case 9:return e.setState({disabled:!1}),te.a.error({message:"Error",description:"Incorrect link. Please try again."}),t.abrupt("return");case 12:t.next=19;break;case 14:return t.prev=14,t.t0=t.catch(2),e.setState({disabled:!1}),te.a.error({message:"Error",description:"Incorrect link. Please try again."}),t.abrupt("return");case 19:return t.prev=19,t.next=22,se.a.post("https://amp-api.music.apple.com/v1/catalog/ru/playlists/pl.u-Ldbqer3sxXJqNdL?omit%5Bresource%5D=autos&views=featured-artists&extend=artistUrl%2CcomposerUrl%2CtrackCount&include=tracks&include%5Bplaylists%5D=curator&include%5Bsongs%5D=composers&fields%5Bartists%5D=name%2Curl%2Cartwork&l=en-gb",{"media-user-token":"AiASWcLRIa3uDwUI43TQmFeDMHomRXqujkGZ1M8mnHBt/WFgaFjlRwzOeq3aaSvyy1H00fZT2c5kcp1rkOO05K99vXaZhIZxgk46xxd5gS+CCEudlF8svGp5CRdOJyJuinHNi8Z8oven2gvV7TawTlSzgAacGvzsa1Ag/c3JSmgTEwypKSh7ILbHovdrc3Vd2ik6ErWKp7z8r3oTXf0a/z8WvyslXVb4x0AuT6E1nRPyR8hcmA==",Authorization:"Bearer eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IldlYlBsYXlLaWQifQ.eyJpc3MiOiJBTVBXZWJQbGF5IiwiaWF0IjoxNjAwODgyNjE0LCJleHAiOjE2MTY0MzQ2MTR9.X2J6U95uw_3hOR6lKGS4TDnUIySZmR63yT6SshoUolXuw5zaR-0Z3taOXBiwfyomfDdJUBh0Rdo1Qt0_gSzFvA","User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 11_0) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Safari/605.1.15"}).then((function(t){console.log(t);try{e.props.playlist.setAppleMusic(t),e.props.onUpload()}catch(i){var a,n;e.setState({disabled:!1}),te.a.error({message:"Error",description:(null===(a=t.data)||void 0===a?void 0:a.error_msg)?null===(n=t.data)||void 0===n?void 0:n.error_msg:"Server error"})}}));case 22:t.next=28;break;case 24:t.prev=24,t.t1=t.catch(19),e.setState({disabled:!1}),te.a.error({message:"Error",description:"Your Internet connection is not stable."});case 28:case"end":return t.stop()}}),t,null,[[2,14],[19,24]])})));return function(e){return t.apply(this,arguments)}}(),placeholder:"https://music.apple.com/..."}))}}]),a}(i.a.Component),oe=a(36),ce=a.n(oe),ue=a(642),pe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={selectedRowKeys:[]},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e}return Object(c.a)(a,[{key:"nextStep",value:function(){this.props.playlist.filter(this.state.selectedRowKeys),this.props.next()}},{key:"nextStepButton",value:function(){var e=this.state.selectedRowKeys,t=e.length>0;return i.a.createElement("div",{style:{margin:"16px 0",textAlign:"right"}},i.a.createElement("span",{style:{marginRight:8}},t?"Selected ".concat(e.length," items"):""),i.a.createElement(O.a,{size:"l",style:{background:"#d6363f",color:"#fff",borderRadius:"500px"},onClick:this.nextStep.bind(this),disabled:!t},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}})))))}},{key:"render",value:function(){var e={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return i.a.createElement("div",{style:{padding:"0 0"}},this.nextStepButton(),i.a.createElement(ue.a,{rowSelection:e,columns:[{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],rowKey:"index",dataSource:this.props.playlist.playlist,pagination:!1,bordered:!0}),this.nextStepButton())}}]),a}(i.a.Component),de=a(65),me=a.n(de),he=a(95),ye=a.n(he),fe=a(96),ge=a.n(fe),be=a(644),ve=a(637),Ee=a(638),xe=a(650),ke=a(645),Se=a(646),Ce=a(651),Pe=a(639),we=a(262),Re=a(101),Ie=a(55),je=a(647),Oe=a(279),Ae=function(e){var t=new Date(null);return t.setSeconds(e),t.toISOString().substr(11,8)},Te=be.a.Item,Me=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={settingsItem:null,settingsVisible:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.playlist.onChange((function(){e.forceUpdate()}))}},{key:"buttons",value:function(e){var t=!0,a=this.props.playlist,n=a.spotifyStatus;U=0,V=0,K=0;for(var s=0;a.playlist.length>s;s++)"withResult"===a.playlist[s].spotifyStatus&&(t=!1),"pending"!==a.playlist[s].spotifyStatus&&U++,"withResult"===a.playlist[s].spotifyStatus&&V++,"noResult"===a.playlist[s].spotifyStatus&&K++;return U=Math.round(U/a.playlist.length*100),i.a.createElement("div",{style:{margin:"16px 0",textAlign:"right"}},i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3},disabled:"paused"!==n&&null!==n,onClick:this.resume.bind(this),type:"dashed"},"Start/Resume"),i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3},disabled:"searching"!==n,onClick:this.pause.bind(this)},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Pause",i.a.createElement(ge.a,{width:20,height:20,style:{marginLeft:4}})))),i.a.createElement(ve.a,{trigger:"click",placement:"top"===e?"bottomRight":"topRight",content:this.settings()},i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3}},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Search Settings",i.a.createElement(me.a,{width:20,height:20,style:{marginLeft:4}}))))),"searchComplete"!==a.spotifyStatus&&i.a.createElement(Ee.a,{title:"The search is not complete. Are you sure you want to go to the next step?",onConfirm:this.nextStep.bind(this),okText:"Yes",placement:"top"===e?"bottomRight":"topRight",cancelText:"No"},i.a.createElement(y.a,{type:"primary",size:"large",disabled:t,style:{borderRadius:"500px",cursor:"pointer",marginTop:3}},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}}))))),"searchComplete"===a.spotifyStatus&&i.a.createElement(y.a,{type:"link",size:"large",style:{background:"#d6363f",color:"#fff",borderRadius:"500px",marginTop:3},onClick:this.nextStep.bind(this),disabled:t},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}})))))}},{key:"nextStep",value:function(){this.props.nextStep()}},{key:"pause",value:function(){this.props.playlist.pauseSearch()}},{key:"resume",value:function(){this.props.playlist.startSearch()}},{key:"trackLabel",value:function(e){switch(e.spotifyStatus){default:case"pending":return i.a.createElement(xe.a,{color:"#7f8c8d",style:{borderRadius:"500px"}},"Pending");case"failed":return i.a.createElement(xe.a,{color:"#e74c3c",style:{borderRadius:"500px"}},"Failed");case"searching":return i.a.createElement(xe.a,{color:"#8e44ad",style:{borderRadius:"500px"}},"Searching");case"noResult":return i.a.createElement(xe.a,{color:"#f1c40f",style:{borderRadius:"500px"}},"No Result");case"withResult":return i.a.createElement(xe.a,{color:"#27ae60",style:{borderRadius:"500px"}},"Found")}}},{key:"statusColumn",value:function(e,t){var a=this,n=t.spotifyStatus;return i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},this.trackLabel(t),"withResult"===n&&i.a.createElement(y.a,{style:{borderRadius:"500px"},size:"small",onClick:function(){a.setState({settingsItem:t.index,settingsVisible:!0})}},i.a.createElement(me.a,{width:20,height:20})))}},{key:"settings",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(be.a,{style:{width:300},onSubmit:this.settingsFormSave.bind(this)},i.a.createElement(Te,{label:"Search Format",help:"Placeholders: {name}, {artist}, {album}, {composer}, {discCount}, {discNumber}, {genre}, {trackCount}, {trackNumber} and {year}"},e("searchFormat",{initialValue:this.props.playlist.settings.searchFormat,rules:[{required:!0,message:"Please fill the field."}]})(i.a.createElement(ke.a,{placeholder:"Search Format"}))),i.a.createElement(Te,{style:{marginBottom:0}},i.a.createElement(y.a,{type:"primary",style:{width:"100%"},htmlType:"submit"},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},"Done",i.a.createElement(ye.a,{width:20,height:20,style:{marginLeft:4}}))))))}},{key:"settingsFormSave",value:function(e){e.preventDefault();var t=this.props;t.form.validateFields((function(e,a){e||Object(z.each)(a,(function(e,a){t.playlist.option(a,e)}))}))}},{key:"songSettingsModal",value:function(){var e,t,a=this,n=this.props.playlist,s=this.state.settingsItem,r=[];if(null!==this.state.settingsItem){e=n.playlist[s],t=n.playlist[s].spotifySelected;for(var l=0;e.spotifyResults.length>l;l++){var o=e.spotifyResults[l];r.push({index:l,id:o.id,name:o.name,link:o.external_urls.spotify,image:o.album.images[1].url,duration:o.duration_ms/1e3,trackNumber:o.track_number,artistName:o.artists[0].name,artistLink:o.artists[0].external_urls.spotify,albumName:o.album.name,albumLink:o.album.external_urls.spotify,track:o})}}return i.a.createElement(Se.a,{title:"Song Settings",visible:this.state.settingsVisible,footer:null,onCancel:function(){a.setState({settingsVisible:!1}),setTimeout((function(){return a.setState({settingsItem:null})}),200)}},i.a.createElement(Ce.a,{itemLayout:"horizontal",dataSource:r,renderItem:function(e){var a=i.a.createElement(Pe.a,{checked:t.id===e.id,onChange:function(){n.setSpotifySelected(s,e.id)}});return i.a.createElement(Ce.a.Item,{actions:[a]},i.a.createElement(Ce.a.Item.Meta,{avatar:i.a.createElement(we.a,{src:e.image,size:"large"}),description:i.a.createElement("p",null,"Album: ",i.a.createElement("a",{href:e.albumLink},e.albumName)," - ",Ae(e.duration)),title:i.a.createElement("a",{rel:"noopener noreferrer",href:e.link,target:"_blank"},e.artistName," - ",e.name)}))}}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{style:{maxWidth:window.innerWidth-.3*window.innerWidth,marginRight:"auto",marginLeft:"auto",textAlign:"center"}},i.a.createElement(Re.a,{gutter:16},i.a.createElement(Ie.a,{span:12},i.a.createElement(ae.a,null,i.a.createElement(je.a,{title:"Found",value:V,precision:0,valueStyle:{color:"#3f8600"},suffix:"\ud83d\udc4d",style:{height:"57px"}}))),i.a.createElement(Ie.a,{span:12},i.a.createElement(ae.a,null,i.a.createElement(je.a,{title:"Without result",value:K,precision:0,valueStyle:{color:"#cf1322"},suffix:"\ud83d\udc4e",style:{height:"57px"}})))),i.a.createElement(Oe.a,{percent:U,status:"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}})),this.buttons("top"),i.a.createElement(ue.a,{rowKey:"index",columns:[{title:"Status",dataIndex:"status",width:"13%",render:this.statusColumn.bind(this)},{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],dataSource:this.props.playlist.playlist,pagination:!1,bordered:!0}),this.buttons("bottom"),this.songSettingsModal())}}]),a}(i.a.Component),Fe=be.a.create()(Me),Ne=a(100),Le=a(97),_e=a(652),De=a(149),ze=be.a.Item,Ue=ke.a.TextArea,Ve=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={playlist:null,userPlaylists:null,fetchingPlaylists:!1,isCreatingPlaylist:!1,createPlaylistModalVisible:!1,isImporting:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.playlist.onChange((function(){e.forceUpdate()}))}},{key:"selectPlaylist",value:function(){var e=this;null===this.state.userPlaylists&&(this.setState({fetchingPlaylists:!0}),P().then((function(t){e.setState({fetchingPlaylists:!1,userPlaylists:t.data})})).catch((function(){alert("Couldn't get playlists. Please try again.")})))}},{key:"selectPlaylistsMenu",value:function(){var e=this;return i.a.createElement(Ne.a,{onClick:function(t){e.setState({playlist:t.item.props.playlist},(function(){e.importSong()}))}},null===this.state.userPlaylists?null:this.state.userPlaylists.items.map((function(e,t){return i.a.createElement(Ne.a.Item,{key:t,playlist:e},e.name)})))}},{key:"createPlaylistModal",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(Se.a,{title:"Create Playlist",closable:!1,maskClosable:!0,visible:this.state.createPlaylistModalVisible,onCancel:function(){return e.setState({createPlaylistModalVisible:!1})},footer:[i.a.createElement(y.a,{style:{cursor:"pointer"},key:"back",onClick:function(){return e.setState({createPlaylistModalVisible:!1})}},"Cancel"),i.a.createElement(y.a,{style:{cursor:"pointer"},key:"submit",type:"primary",loading:this.state.isCreatingPlaylist,onClick:this.createPlaylist.bind(this)},"Create")]},i.a.createElement(be.a,{onSubmit:this.createPlaylist.bind(this)},i.a.createElement(ze,null,t("name",{validateTrigger:"onBlur",rules:[{required:!0,message:"Please enter a name"}]})(i.a.createElement(ke.a,{placeholder:"Playlist Name"}))),i.a.createElement(ze,null,t("description",{initialValue:""})(i.a.createElement(Ue,{autosize:!0,placeholder:"Playlist Description"}))),i.a.createElement(ze,null,t("isPublic",{initialValue:!0})(i.a.createElement(Le.a,{defaultChecked:!0},"This is a public playlist!")))))}},{key:"createPlaylist",value:function(e){var t=this;e&&e.preventDefault(),this.props.form.validateFields((function(e,a){e||(t.setState({isCreatingPlaylist:!0}),w(t.props.user.id,a.name,a.description,a.isPublic).then((function(e){t.setState({isCreatingPlaylist:!1,createPlaylistModalVisible:!1,playlist:e.data}),t.importSong()})).catch((function(){alert("Couldn't create the playlist. Please refresh the page.")})))}))}},{key:"importSong",value:function(){var e=Object(Q.a)(G.a.mark((function e(){var t,a,n,i,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.playlist.setSpotifyStatus("importing"),t=this.props.playlist.getPlaylist("withResult"),a=Object(z.chunk)(t,100),n=0;case 4:if(!(a.length>n)){e.next=12;break}for(i=[],s=0;a[n].length>s;s++)i.push(a[n][s].spotifySelected.uri);return e.next=9,R(this.props.user.id,this.state.playlist.id,i);case 9:n++,e.next=4;break;case 12:this.props.playlist.setSpotifyStatus("done");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"importTable",value:function(){return i.a.createElement(ue.a,{loading:this.state.isImporting,bordered:!0,rowKey:"index",columns:[{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],dataSource:this.props.playlist.getPlaylist("withResult"),pagination:!1})}},{key:"render",value:function(){var e=this;return"done"===this.props.playlist.spotifyStatus?i.a.createElement(_e.a,{message:"All Songs Imported",description:i.a.createElement("div",null,"All songs imported. ",i.a.createElement("br",null),i.a.createElement("a",{href:this.state.playlist.external_urls.spotify},this.state.playlist.name)),type:"success",showIcon:!0}):i.a.createElement("div",null,null===this.state.playlist&&i.a.createElement(ae.a,{style:{marginRight:"auto",marginLeft:"auto",maxWidth:"650px",textAlign:"center"}},i.a.createElement("p",null,"Choose where you want to move the songs, to a new album or an existing one?"),i.a.createElement(y.a,{type:"link",size:"large",onClick:function(){return e.setState({createPlaylistModalVisible:!0})},style:{marginLeft:5,marginTop:13,borderRadius:"500px",maxWidth:"600px",height:"45px",background:"#1DB954",color:"#fff",cursor:"pointer"}},"Create a New Playlist"),i.a.createElement(De.a,{trigger:["click"],overlay:this.selectPlaylistsMenu(),placement:"bottomLeft"},i.a.createElement(y.a,{type:"link",size:"large",onClick:this.selectPlaylist.bind(this),loading:this.state.fetchingPlaylists,style:{marginLeft:5,marginTop:13,borderRadius:"500px",maxWidth:"600px",height:"45px",background:"#1DB954",color:"#fff",cursor:"pointer"}},"Import to Existing Playlist"))),null!==this.state.playlist&&this.importTable(),this.createPlaylistModal())}}]),a}(i.a.Component),Ke=be.a.create()(Ve),Be=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={isFetching:!1,isFetchingUser:!1,user:null,step:0},e.appleMusicPlaylist=new H({}),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;v()&&(this.setState({isFetchingUser:!0}),C().then((function(t){e.setState({isFetchingUser:!1,user:t.data})})).catch((function(){alert("Couldn't fetch your data. Please refresh the page or try logging in again!")})))}},{key:"step1",value:function(){var e=this;return i.a.createElement(le,{playlist:this.appleMusicPlaylist,onUpload:function(){e.setState({step:1})}})}},{key:"step2",value:function(){var e=this;return i.a.createElement(pe,{playlist:this.appleMusicPlaylist,next:function(){return e.setState({step:2})}})}},{key:"step3",value:function(){var e=this;return i.a.createElement(Fe,{playlist:this.appleMusicPlaylist,nextStep:function(){return e.setState({step:3})}})}},{key:"step4",value:function(){return i.a.createElement(Ke,{user:this.state.user,playlist:this.appleMusicPlaylist})}},{key:"content",value:function(){switch(this.state.step){default:case 0:return this.step1();case 1:return this.step2();case 2:return this.step3();case 3:return this.step4()}}},{key:"render",value:function(){var e=T.a.Step;return v()?this.state.isFetchingUser?i.a.createElement("p",{style:{textAlign:"center"}},"Fetching your data..."):i.a.createElement("div",null,i.a.createElement("h2",{style:{textAlign:"center",color:"#d6514c"}},"Apple Music"),i.a.createElement("br",null),i.a.createElement(T.a,{current:this.state.step},i.a.createElement(e,{title:"Upload Playlist",description:"Upload playlist file"}),i.a.createElement(e,{title:"Select Playlist Songs",description:"Select specific songs of the playlist to transfer"}),i.a.createElement(e,{title:"Find Playlist Songs",description:"Automatic search for playlist songs on Spotify"}),i.a.createElement(e,{title:"Import Songs",description:"Import playlist songs to a Spotify playlist"})),i.a.createElement("div",{style:{marginTop:50}},this.content())):i.a.createElement("h2",{style:{textAlign:"center"}},"You need to login first.")}}]),a}(i.a.Component),We=function(){var e=m.a.loading("Action in progress..",0);setTimeout(e,2500)},Ye=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={disabled:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(ae.a,{style:{marginRight:"auto",marginLeft:"auto",maxWidth:"650px",textAlign:"center"}},i.a.createElement("p",null,"Insert the album link in the lower field and press Enter"),i.a.createElement(O.b,{disabled:this.state.disabled,onKeyDown:function(){var t=Object(Q.a)(G.a.mark((function t(a){var n,i,s,r,l;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==a.key){t.next=47;break}if(e.setState({disabled:!0}),t.prev=2,r="vk",!((l=a.target.value).search(/playlist/i)>-1)){t.next=17;break}(l=l.split("playlist")).splice(0,1),l=(l=l[0].toString()).split("_"),n=Number(l[0].replace(/[^-_\d]/g,"")),l=l[1].split("/"),i=Number(l[0]),s=l[1],We(),t.next=31;break;case 17:if(!(l.search(/album/i)>-1)){t.next=28;break}(l=l.split("album")).splice(0,1),l=(l=l[0].toString()).split("_"),n=Number(l[0].replace(/[^-_\d]/g,"")),i=Number(l[1]),s=l[2],We(),t.next=31;break;case 28:return e.setState({disabled:!1}),te.a.error({message:"Error",description:"Incorrect link. Please try again."}),t.abrupt("return");case 31:t.next=38;break;case 33:return t.prev=33,t.t0=t.catch(2),e.setState({disabled:!1}),te.a.error({message:"Error",description:"Incorrect link. Please try again."}),t.abrupt("return");case 38:return t.prev=38,t.next=41,se.a.post("https://2spotify.dan0102dan.ru/vk",{userId:n,playlistId:i,access_key:s,app:r}).then((function(t){try{e.props.playlist.setVKPlaylist(t),e.props.onUpload()}catch(i){var a,n;e.setState({disabled:!1}),te.a.error({message:"Error",description:(null===(a=t.data)||void 0===a?void 0:a.error_msg)?null===(n=t.data)||void 0===n?void 0:n.error_msg:"Server error"})}}));case 41:t.next=47;break;case 43:t.prev=43,t.t1=t.catch(38),e.setState({disabled:!1}),te.a.error({message:"Error",description:"Your Internet connection is not stable."});case 47:case"end":return t.stop()}}),t,null,[[2,33],[38,43]])})));return function(e){return t.apply(this,arguments)}}(),placeholder:"https://vk.com/music/playlist/..."}))}}]),a}(i.a.Component),Je=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={selectedRowKeys:[]},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e}return Object(c.a)(a,[{key:"nextStep",value:function(){this.props.playlist.filter(this.state.selectedRowKeys),this.props.next()}},{key:"nextStepButton",value:function(){var e=this.state.selectedRowKeys,t=e.length>0;return i.a.createElement("div",{style:{margin:"16px 0",textAlign:"right"}},i.a.createElement("span",{style:{marginRight:8}},t?"Selected ".concat(e.length," items"):""),i.a.createElement(O.a,{size:"l",style:{background:"#d6363f",color:"#fff",borderRadius:"500px"},onClick:this.nextStep.bind(this),disabled:!t},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}})))))}},{key:"render",value:function(){var e={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return i.a.createElement("div",{style:{padding:"0 0"}},this.nextStepButton(),i.a.createElement(ue.a,{rowSelection:e,columns:[{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],rowKey:"index",dataSource:this.props.playlist.playlist,pagination:!1,bordered:!0}),this.nextStepButton())}}]),a}(i.a.Component),qe=be.a.Item,Xe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={settingsItem:null,settingsVisible:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.playlist.onChange((function(){e.forceUpdate()}))}},{key:"buttons",value:function(e){var t=!0,a=this.props.playlist,n=a.spotifyStatus;B=0,W=0,Y=0;for(var s=0;a.playlist.length>s;s++)"withResult"===a.playlist[s].spotifyStatus&&(t=!1),"pending"!==a.playlist[s].spotifyStatus&&B++,"withResult"===a.playlist[s].spotifyStatus&&W++,"noResult"===a.playlist[s].spotifyStatus&&Y++;return B=Math.round(B/a.playlist.length*100),i.a.createElement("div",{style:{margin:"16px 0",textAlign:"right"}},i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3},disabled:"paused"!==n&&null!==n,onClick:this.resume.bind(this),type:"dashed"},"Start/Resume"),i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3},disabled:"searching"!==n,onClick:this.pause.bind(this)},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Pause",i.a.createElement(ge.a,{width:20,height:20,style:{marginLeft:4}})))),i.a.createElement(ve.a,{trigger:"click",placement:"top"===e?"bottomRight":"topRight",content:this.settings()},i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3}},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Search Settings",i.a.createElement(me.a,{width:20,height:20,style:{marginLeft:4}}))))),"searchComplete"!==a.spotifyStatus&&i.a.createElement(Ee.a,{title:"The search is not complete. Are you sure you want to go to the next step?",onConfirm:this.nextStep.bind(this),okText:"Yes",placement:"top"===e?"bottomRight":"topRight",cancelText:"No"},i.a.createElement(y.a,{type:"primary",size:"large",disabled:t,style:{borderRadius:"500px",cursor:"pointer",marginTop:3}},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}}))))),"searchComplete"===a.spotifyStatus&&i.a.createElement(y.a,{type:"link",size:"large",style:{background:"#d6363f",color:"#fff",borderRadius:"500px",marginTop:3},onClick:this.nextStep.bind(this),disabled:t},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}})))))}},{key:"nextStep",value:function(){this.props.nextStep()}},{key:"pause",value:function(){this.props.playlist.pauseSearch()}},{key:"resume",value:function(){this.props.playlist.startSearch()}},{key:"trackLabel",value:function(e){switch(e.spotifyStatus){default:case"pending":return i.a.createElement(xe.a,{color:"#7f8c8d",style:{borderRadius:"500px"}},"Pending");case"failed":return i.a.createElement(xe.a,{color:"#e74c3c",style:{borderRadius:"500px"}},"Failed");case"searching":return i.a.createElement(xe.a,{color:"#8e44ad",style:{borderRadius:"500px"}},"Searching");case"noResult":return i.a.createElement(xe.a,{color:"#f1c40f",style:{borderRadius:"500px"}},"No Result");case"withResult":return i.a.createElement(xe.a,{color:"#27ae60",style:{borderRadius:"500px"}},"Found")}}},{key:"statusColumn",value:function(e,t){var a=this,n=t.spotifyStatus;return i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},this.trackLabel(t),"withResult"===n&&i.a.createElement(y.a,{style:{borderRadius:"500px"},size:"small",onClick:function(){a.setState({settingsItem:t.index,settingsVisible:!0})}},i.a.createElement(me.a,{width:20,height:20})))}},{key:"settings",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(be.a,{style:{width:300},onSubmit:this.settingsFormSave.bind(this)},i.a.createElement(qe,{label:"Search Format",help:"Placeholders: {name}, {artist}, {discCount}, {discNumber} and {year}"},e("searchFormat",{initialValue:this.props.playlist.settings.searchFormat,rules:[{required:!0,message:"Please fill the field."}]})(i.a.createElement(ke.a,{placeholder:"Search Format"}))),i.a.createElement(qe,{style:{marginBottom:0}},i.a.createElement(y.a,{type:"primary",style:{width:"100%"},htmlType:"submit"},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},"Done",i.a.createElement(ye.a,{width:20,height:20,style:{marginLeft:4}}))))))}},{key:"settingsFormSave",value:function(e){e.preventDefault();var t=this.props;t.form.validateFields((function(e,a){e||Object(z.each)(a,(function(e,a){t.playlist.option(a,e)}))}))}},{key:"songSettingsModal",value:function(){var e,t,a=this,n=this.props.playlist,s=this.state.settingsItem,r=[];if(null!==this.state.settingsItem){e=n.playlist[s],t=n.playlist[s].spotifySelected;for(var l=0;e.spotifyResults.length>l;l++){var o=e.spotifyResults[l];r.push({index:l,id:o.id,name:o.name,link:o.external_urls.spotify,image:o.album.images[1].url,duration:o.duration_ms/1e3,trackNumber:o.track_number,artistName:o.artists[0].name,artistLink:o.artists[0].external_urls.spotify,albumName:o.album.name,albumLink:o.album.external_urls.spotify,track:o})}}return i.a.createElement(Se.a,{title:"Song Settings",visible:this.state.settingsVisible,footer:null,onCancel:function(){a.setState({settingsVisible:!1}),setTimeout((function(){return a.setState({settingsItem:null})}),200)}},i.a.createElement(Ce.a,{itemLayout:"horizontal",dataSource:r,renderItem:function(e){var a=i.a.createElement(Pe.a,{checked:t.id===e.id,onChange:function(){n.setSpotifySelected(s,e.id)}});return i.a.createElement(Ce.a.Item,{actions:[a]},i.a.createElement(Ce.a.Item.Meta,{avatar:i.a.createElement(we.a,{src:e.image,size:"large"}),description:i.a.createElement("p",null,"Album: ",i.a.createElement("a",{href:e.albumLink},e.albumName)," - ",Ae(e.duration)),title:i.a.createElement("a",{rel:"noopener noreferrer",href:e.link,target:"_blank"},e.artistName," - ",e.name)}))}}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{style:{maxWidth:window.innerWidth-.3*window.innerWidth,marginRight:"auto",marginLeft:"auto",textAlign:"center"}},i.a.createElement(Re.a,{gutter:16},i.a.createElement(Ie.a,{span:12},i.a.createElement(ae.a,null,i.a.createElement(je.a,{title:"Found",value:W,precision:0,valueStyle:{color:"#3f8600"},suffix:"\ud83d\udc4d",style:{height:"57px"}}))),i.a.createElement(Ie.a,{span:12},i.a.createElement(ae.a,null,i.a.createElement(je.a,{title:"Without result",value:Y,precision:0,valueStyle:{color:"#cf1322"},suffix:"\ud83d\udc4e",style:{height:"57px"}})))),i.a.createElement(Oe.a,{percent:B,status:"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}})),this.buttons("top"),i.a.createElement(ue.a,{rowKey:"index",columns:[{title:"Status",dataIndex:"status",width:"13%",render:this.statusColumn.bind(this)},{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],dataSource:this.props.playlist.playlist,pagination:!1,bordered:!0}),this.buttons("bottom"),this.songSettingsModal())}}]),a}(i.a.Component),He=be.a.create()(Xe),Ze=be.a.Item,Ge=ke.a.TextArea,Qe=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={playlist:null,userPlaylists:null,fetchingPlaylists:!1,isCreatingPlaylist:!1,createPlaylistModalVisible:!1,isImporting:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.playlist.onChange((function(){e.forceUpdate()}))}},{key:"selectPlaylist",value:function(){var e=this;null===this.state.userPlaylists&&(this.setState({fetchingPlaylists:!0}),P().then((function(t){e.setState({fetchingPlaylists:!1,userPlaylists:t.data})})).catch((function(){alert("Couldn't get playlists. Please try again.")})))}},{key:"selectPlaylistsMenu",value:function(){var e=this;return i.a.createElement(Ne.a,{onClick:function(t){e.setState({playlist:t.item.props.playlist},(function(){e.importSong()}))}},null===this.state.userPlaylists?null:this.state.userPlaylists.items.map((function(e,t){return i.a.createElement(Ne.a.Item,{key:t,playlist:e},e.name)})))}},{key:"createPlaylistModal",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(Se.a,{title:"Create Playlist",closable:!1,maskClosable:!0,visible:this.state.createPlaylistModalVisible,onCancel:function(){return e.setState({createPlaylistModalVisible:!1})},footer:[i.a.createElement(y.a,{style:{cursor:"pointer"},key:"back",onClick:function(){return e.setState({createPlaylistModalVisible:!1})}},"Cancel"),i.a.createElement(y.a,{style:{cursor:"pointer"},key:"submit",type:"primary",loading:this.state.isCreatingPlaylist,onClick:this.createPlaylist.bind(this)},"Create")]},i.a.createElement(be.a,{onSubmit:this.createPlaylist.bind(this)},i.a.createElement(Ze,null,t("name",{validateTrigger:"onBlur",rules:[{required:!0,message:"Please enter a name"}]})(i.a.createElement(ke.a,{placeholder:"Playlist Name"}))),i.a.createElement(Ze,null,t("description",{initialValue:""})(i.a.createElement(Ge,{autosize:!0,placeholder:"Playlist Description"}))),i.a.createElement(Ze,null,t("isPublic",{initialValue:!0})(i.a.createElement(Le.a,{defaultChecked:!0},"This is a public playlist!")))))}},{key:"createPlaylist",value:function(e){var t=this;e&&e.preventDefault(),this.props.form.validateFields((function(e,a){e||(t.setState({isCreatingPlaylist:!0}),w(t.props.user.id,a.name,a.description,a.isPublic).then((function(e){t.setState({isCreatingPlaylist:!1,createPlaylistModalVisible:!1,playlist:e.data}),t.importSong()})).catch((function(){alert("Couldn't create the playlist. Please refresh the page.")})))}))}},{key:"importSong",value:function(){var e=Object(Q.a)(G.a.mark((function e(){var t,a,n,i,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.playlist.setSpotifyStatus("importing"),t=this.props.playlist.getPlaylist("withResult"),a=Object(z.chunk)(t,100),n=0;case 4:if(!(a.length>n)){e.next=12;break}for(i=[],s=0;a[n].length>s;s++)i.push(a[n][s].spotifySelected.uri);return e.next=9,R(this.props.user.id,this.state.playlist.id,i);case 9:n++,e.next=4;break;case 12:this.props.playlist.setSpotifyStatus("done");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"importTable",value:function(){return i.a.createElement(ue.a,{loading:this.state.isImporting,bordered:!0,rowKey:"index",columns:[{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],dataSource:this.props.playlist.getPlaylist("withResult"),pagination:!1})}},{key:"render",value:function(){var e=this;return"done"===this.props.playlist.spotifyStatus?i.a.createElement(_e.a,{message:"All Songs Imported",description:i.a.createElement("div",null,"All songs imported. ",i.a.createElement("br",null),i.a.createElement("a",{href:this.state.playlist.external_urls.spotify},this.state.playlist.name)),type:"success",showIcon:!0}):i.a.createElement("div",null,null===this.state.playlist&&i.a.createElement(ae.a,{style:{marginRight:"auto",marginLeft:"auto",maxWidth:"650px",textAlign:"center"}},i.a.createElement("p",null,"Choose where you want to move the songs, to a new album or an existing one?"),i.a.createElement(y.a,{type:"link",size:"large",onClick:function(){return e.setState({createPlaylistModalVisible:!0})},style:{marginLeft:5,marginTop:13,borderRadius:"500px",maxWidth:"600px",height:"45px",background:"#1DB954",color:"#fff",cursor:"pointer"}},"Create a New Playlist"),i.a.createElement(De.a,{trigger:["click"],overlay:this.selectPlaylistsMenu(),placement:"bottomLeft"},i.a.createElement(y.a,{type:"link",size:"large",onClick:this.selectPlaylist.bind(this),loading:this.state.fetchingPlaylists,style:{marginLeft:5,marginTop:13,borderRadius:"500px",maxWidth:"600px",height:"45px",background:"#1DB954",color:"#fff",cursor:"pointer"}},"Import to Existing Playlist"))),null!==this.state.playlist&&this.importTable(),this.createPlaylistModal())}}]),a}(i.a.Component),$e=be.a.create()(Qe),et=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={isFetching:!1,isFetchingUser:!1,user:null,step:0},e.appleMusicPlaylist=new H({}),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;v()&&(this.setState({isFetchingUser:!0}),C().then((function(t){e.setState({isFetchingUser:!1,user:t.data})})).catch((function(){alert("Couldn't fetch your data. Please refresh the page or try logging in again!")})))}},{key:"step1",value:function(){var e=this;return i.a.createElement(Ye,{playlist:this.appleMusicPlaylist,onUpload:function(){e.setState({step:1})}})}},{key:"step2",value:function(){var e=this;return i.a.createElement(Je,{playlist:this.appleMusicPlaylist,next:function(){return e.setState({step:2})}})}},{key:"step3",value:function(){var e=this;return i.a.createElement(He,{playlist:this.appleMusicPlaylist,nextStep:function(){return e.setState({step:3})}})}},{key:"step4",value:function(){return i.a.createElement($e,{user:this.state.user,playlist:this.appleMusicPlaylist})}},{key:"content",value:function(){switch(this.state.step){default:case 0:return this.step1();case 1:return this.step2();case 2:return this.step3();case 3:return this.step4()}}},{key:"render",value:function(){var e=T.a.Step;return v()?this.state.isFetchingUser?i.a.createElement("p",{style:{textAlign:"center"}},"Fetching your data..."):i.a.createElement("div",null,i.a.createElement("h2",{style:{textAlign:"center",color:"#374ed3"}},"VK Music"),i.a.createElement("br",null),i.a.createElement(T.a,{current:this.state.step},i.a.createElement(e,{title:"Upload Playlist",description:"Insert the link"}),i.a.createElement(e,{title:"Select Playlist Songs",description:"Select specific songs of the playlist to transfer"}),i.a.createElement(e,{title:"Find Playlist Songs",description:"Automatic search for playlist songs on Spotify"}),i.a.createElement(e,{title:"Import Songs",description:"Import playlist songs to a Spotify playlist"})),i.a.createElement("div",{style:{marginTop:50}},this.content())):i.a.createElement("h2",{style:{textAlign:"center"}},"You need to login first.")}}]),a}(i.a.Component),tt=function(){var e=m.a.loading("Action in progress..",0);setTimeout(e,2500)},at=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={disabled:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(ae.a,{style:{marginRight:"auto",marginLeft:"auto",maxWidth:"650px",textAlign:"center"}},i.a.createElement("p",null,"Insert the playlist link in the lower field and press Enter"),i.a.createElement(O.b,{disabled:this.state.disabled,onKeyDown:function(){var t=Object(Q.a)(G.a.mark((function t(a){var n,i,s,r;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==a.key){t.next=34;break}if(e.setState({disabled:!0}),t.prev=2,s="yandex",!((r=a.target.value).search(/playlist/i)>-1)){t.next=15;break}r=r.split("playlist"),i=Number(r[1].replace(/[^\d]/g,"")),r.splice(1,1),r=(r=r[0]).split("users"),n=r[1].replace(/\//g,""),tt(),t.next=18;break;case 15:return e.setState({disabled:!1}),te.a.error({message:"Error",description:"Incorrect link. Please try again."}),t.abrupt("return");case 18:t.next=25;break;case 20:return t.prev=20,t.t0=t.catch(2),e.setState({disabled:!1}),te.a.error({message:"Error",description:"Incorrect link. Please try again."}),t.abrupt("return");case 25:return t.prev=25,t.next=28,se.a.post("https://2spotify.dan0102dan.ru/yandex",{user:n,playlistId:i,app:s}).then((function(t){try{e.props.playlist.setYandexPlaylist(t),e.props.onUpload()}catch(i){var a,n;e.setState({disabled:!1}),te.a.error({message:"Error",description:(null===(a=t.data)||void 0===a?void 0:a.error_msg)?null===(n=t.data)||void 0===n?void 0:n.error_msg:"Server error"})}}));case 28:t.next=34;break;case 30:t.prev=30,t.t1=t.catch(25),e.setState({disabled:!1}),te.a.error({message:"Error",description:"Your Internet connection is not stable."});case 34:case"end":return t.stop()}}),t,null,[[2,20],[25,30]])})));return function(e){return t.apply(this,arguments)}}(),placeholder:"https://music.yandex.ru/users/..."}))}}]),a}(i.a.Component),nt=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={selectedRowKeys:[]},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e}return Object(c.a)(a,[{key:"nextStep",value:function(){this.props.playlist.filter(this.state.selectedRowKeys),this.props.next()}},{key:"nextStepButton",value:function(){var e=this.state.selectedRowKeys,t=e.length>0;return i.a.createElement("div",{style:{margin:"16px 0",textAlign:"right"}},i.a.createElement("span",{style:{marginRight:8}},t?"Selected ".concat(e.length," items"):""),i.a.createElement(O.a,{size:"l",style:{background:"#d6363f",color:"#fff",borderRadius:"500px"},onClick:this.nextStep.bind(this),disabled:!t},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}})))))}},{key:"render",value:function(){var e={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return i.a.createElement("div",{style:{padding:"0 0"}},this.nextStepButton(),i.a.createElement(ue.a,{rowSelection:e,columns:[{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],rowKey:"index",dataSource:this.props.playlist.playlist,pagination:!1,bordered:!0}),this.nextStepButton())}}]),a}(i.a.Component),it=be.a.Item,st=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={settingsItem:null,settingsVisible:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.playlist.onChange((function(){e.forceUpdate()}))}},{key:"buttons",value:function(e){var t=!0,a=this.props.playlist,n=a.spotifyStatus;J=0,q=0,X=0;for(var s=0;a.playlist.length>s;s++)"withResult"===a.playlist[s].spotifyStatus&&(t=!1),"pending"!==a.playlist[s].spotifyStatus&&J++,"withResult"===a.playlist[s].spotifyStatus&&q++,"noResult"===a.playlist[s].spotifyStatus&&X++;return J=Math.round(J/a.playlist.length*100),i.a.createElement("div",{style:{margin:"16px 0",textAlign:"right"}},i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3},disabled:"paused"!==n&&null!==n,onClick:this.resume.bind(this),type:"dashed"},"Start/Resume"),i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3},disabled:"searching"!==n,onClick:this.pause.bind(this)},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Pause",i.a.createElement(ge.a,{width:20,height:20,style:{marginLeft:4}})))),i.a.createElement(ve.a,{trigger:"click",placement:"top"===e?"bottomRight":"topRight",content:this.settings()},i.a.createElement(y.a,{size:"large",style:{marginRight:7,borderRadius:"500px",cursor:"pointer",marginTop:3}},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Search Settings",i.a.createElement(me.a,{width:20,height:20,style:{marginLeft:4}}))))),"searchComplete"!==a.spotifyStatus&&i.a.createElement(Ee.a,{title:"The search is not complete. Are you sure you want to go to the next step?",onConfirm:this.nextStep.bind(this),okText:"Yes",placement:"top"===e?"bottomRight":"topRight",cancelText:"No"},i.a.createElement(y.a,{type:"primary",size:"large",disabled:t,style:{borderRadius:"500px",cursor:"pointer",marginTop:3}},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}}))))),"searchComplete"===a.spotifyStatus&&i.a.createElement(y.a,{type:"link",size:"large",style:{background:"#d6363f",color:"#fff",borderRadius:"500px",marginTop:3},onClick:this.nextStep.bind(this),disabled:t},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},"Next Step",i.a.createElement(ce.a,{style:{marginLeft:4}})))))}},{key:"nextStep",value:function(){this.props.nextStep()}},{key:"pause",value:function(){this.props.playlist.pauseSearch()}},{key:"resume",value:function(){this.props.playlist.startSearch()}},{key:"trackLabel",value:function(e){switch(e.spotifyStatus){default:case"pending":return i.a.createElement(xe.a,{color:"#7f8c8d",style:{borderRadius:"500px"}},"Pending");case"failed":return i.a.createElement(xe.a,{color:"#e74c3c",style:{borderRadius:"500px"}},"Failed");case"searching":return i.a.createElement(xe.a,{color:"#8e44ad",style:{borderRadius:"500px"}},"Searching");case"noResult":return i.a.createElement(xe.a,{color:"#f1c40f",style:{borderRadius:"500px"}},"No Result");case"withResult":return i.a.createElement(xe.a,{color:"#27ae60",style:{borderRadius:"500px"}},"Found")}}},{key:"statusColumn",value:function(e,t){var a=this,n=t.spotifyStatus;return i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},this.trackLabel(t),"withResult"===n&&i.a.createElement(y.a,{style:{borderRadius:"500px"},size:"small",onClick:function(){a.setState({settingsItem:t.index,settingsVisible:!0})}},i.a.createElement(me.a,{width:20,height:20})))}},{key:"settings",value:function(){var e=this.props.form.getFieldDecorator;return i.a.createElement(be.a,{style:{width:300},onSubmit:this.settingsFormSave.bind(this)},i.a.createElement(it,{label:"Search Format",help:"Placeholders: {name}, {artist}, {album}, {composer}, {discCount}, {discNumber}, {genre}, {trackCount}, {trackNumber} and {year}"},e("searchFormat",{initialValue:this.props.playlist.settings.searchFormat,rules:[{required:!0,message:"Please fill the field."}]})(i.a.createElement(ke.a,{placeholder:"Search Format"}))),i.a.createElement(it,{style:{marginBottom:0}},i.a.createElement(y.a,{type:"primary",style:{width:"100%"},htmlType:"submit"},i.a.createElement("div",{display:"flex"},i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},"Done",i.a.createElement(ye.a,{width:20,height:20,style:{marginLeft:4}}))))))}},{key:"settingsFormSave",value:function(e){e.preventDefault();var t=this.props;t.form.validateFields((function(e,a){e||Object(z.each)(a,(function(e,a){t.playlist.option(a,e)}))}))}},{key:"songSettingsModal",value:function(){var e,t,a=this,n=this.props.playlist,s=this.state.settingsItem,r=[];if(null!==this.state.settingsItem){e=n.playlist[s],t=n.playlist[s].spotifySelected;for(var l=0;e.spotifyResults.length>l;l++){var o=e.spotifyResults[l];r.push({index:l,id:o.id,name:o.name,link:o.external_urls.spotify,image:o.album.images[1].url,duration:o.duration_ms/1e3,trackNumber:o.track_number,artistName:o.artists[0].name,artistLink:o.artists[0].external_urls.spotify,albumName:o.album.name,albumLink:o.album.external_urls.spotify,track:o})}}return i.a.createElement(Se.a,{title:"Song Settings",visible:this.state.settingsVisible,footer:null,onCancel:function(){a.setState({settingsVisible:!1}),setTimeout((function(){return a.setState({settingsItem:null})}),200)}},i.a.createElement(Ce.a,{itemLayout:"horizontal",dataSource:r,renderItem:function(e){var a=i.a.createElement(Pe.a,{checked:t.id===e.id,onChange:function(){n.setSpotifySelected(s,e.id)}});return i.a.createElement(Ce.a.Item,{actions:[a]},i.a.createElement(Ce.a.Item.Meta,{avatar:i.a.createElement(we.a,{src:e.image,size:"large"}),description:i.a.createElement("p",null,"Album: ",i.a.createElement("a",{href:e.albumLink},e.albumName)," - ",Ae(e.duration)),title:i.a.createElement("a",{rel:"noopener noreferrer",href:e.link,target:"_blank"},e.artistName," - ",e.name)}))}}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{style:{maxWidth:window.innerWidth-.3*window.innerWidth,marginRight:"auto",marginLeft:"auto",textAlign:"center"}},i.a.createElement(Re.a,{gutter:16},i.a.createElement(Ie.a,{span:12},i.a.createElement(ae.a,null,i.a.createElement(je.a,{title:"Found",value:q,precision:0,valueStyle:{color:"#3f8600"},suffix:"\ud83d\udc4d",style:{height:"57px"}}))),i.a.createElement(Ie.a,{span:12},i.a.createElement(ae.a,null,i.a.createElement(je.a,{title:"Without result",value:X,precision:0,valueStyle:{color:"#cf1322"},suffix:"\ud83d\udc4e",style:{height:"57px"}})))),i.a.createElement(Oe.a,{percent:J,status:"active",strokeColor:{"0%":"#108ee9","100%":"#87d068"}})),this.buttons("top"),i.a.createElement(ue.a,{rowKey:"index",columns:[{title:"Status",dataIndex:"status",width:"13%",render:this.statusColumn.bind(this)},{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],dataSource:this.props.playlist.playlist,pagination:!1,bordered:!0}),this.buttons("bottom"),this.songSettingsModal())}}]),a}(i.a.Component),rt=be.a.create()(st),lt=be.a.Item,ot=ke.a.TextArea,ct=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={playlist:null,userPlaylists:null,fetchingPlaylists:!1,isCreatingPlaylist:!1,createPlaylistModalVisible:!1,isImporting:!1},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.playlist.onChange((function(){e.forceUpdate()}))}},{key:"selectPlaylist",value:function(){var e=this;null===this.state.userPlaylists&&(this.setState({fetchingPlaylists:!0}),P().then((function(t){e.setState({fetchingPlaylists:!1,userPlaylists:t.data})})).catch((function(){alert("Couldn't get playlists. Please try again.")})))}},{key:"selectPlaylistsMenu",value:function(){var e=this;return i.a.createElement(Ne.a,{onClick:function(t){e.setState({playlist:t.item.props.playlist},(function(){e.importSong()}))}},null===this.state.userPlaylists?null:this.state.userPlaylists.items.map((function(e,t){return i.a.createElement(Ne.a.Item,{key:t,playlist:e},e.name)})))}},{key:"createPlaylistModal",value:function(){var e=this,t=this.props.form.getFieldDecorator;return i.a.createElement(Se.a,{title:"Create Playlist",closable:!1,maskClosable:!0,visible:this.state.createPlaylistModalVisible,onCancel:function(){return e.setState({createPlaylistModalVisible:!1})},footer:[i.a.createElement(y.a,{style:{cursor:"pointer"},key:"back",onClick:function(){return e.setState({createPlaylistModalVisible:!1})}},"Cancel"),i.a.createElement(y.a,{style:{cursor:"pointer"},key:"submit",type:"primary",loading:this.state.isCreatingPlaylist,onClick:this.createPlaylist.bind(this)},"Create")]},i.a.createElement(be.a,{onSubmit:this.createPlaylist.bind(this)},i.a.createElement(lt,null,t("name",{validateTrigger:"onBlur",rules:[{required:!0,message:"Please enter a name"}]})(i.a.createElement(ke.a,{placeholder:"Playlist Name"}))),i.a.createElement(lt,null,t("description",{initialValue:""})(i.a.createElement(ot,{autosize:!0,placeholder:"Playlist Description"}))),i.a.createElement(lt,null,t("isPublic",{initialValue:!0})(i.a.createElement(Le.a,{defaultChecked:!0},"This is a public playlist!")))))}},{key:"createPlaylist",value:function(e){var t=this;e&&e.preventDefault(),this.props.form.validateFields((function(e,a){e||(t.setState({isCreatingPlaylist:!0}),w(t.props.user.id,a.name,a.description,a.isPublic).then((function(e){t.setState({isCreatingPlaylist:!1,createPlaylistModalVisible:!1,playlist:e.data}),t.importSong()})).catch((function(){alert("Couldn't create the playlist. Please refresh the page.")})))}))}},{key:"importSong",value:function(){var e=Object(Q.a)(G.a.mark((function e(){var t,a,n,i,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.playlist.setSpotifyStatus("importing"),t=this.props.playlist.getPlaylist("withResult"),a=Object(z.chunk)(t,100),n=0;case 4:if(!(a.length>n)){e.next=12;break}for(i=[],s=0;a[n].length>s;s++)i.push(a[n][s].spotifySelected.uri);return e.next=9,R(this.props.user.id,this.state.playlist.id,i);case 9:n++,e.next=4;break;case 12:this.props.playlist.setSpotifyStatus("done");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"importTable",value:function(){return i.a.createElement(ue.a,{loading:this.state.isImporting,bordered:!0,rowKey:"index",columns:[{title:"Name",dataIndex:"name"},{title:"Artist",dataIndex:"artist"},{title:"Album",dataIndex:"album"}],dataSource:this.props.playlist.getPlaylist("withResult"),pagination:!1})}},{key:"render",value:function(){var e=this;return"done"===this.props.playlist.spotifyStatus?i.a.createElement(_e.a,{message:"All Songs Imported",description:i.a.createElement("div",null,"All songs imported. ",i.a.createElement("br",null),i.a.createElement("a",{href:this.state.playlist.external_urls.spotify},this.state.playlist.name)),type:"success",showIcon:!0}):i.a.createElement("div",null,null===this.state.playlist&&i.a.createElement(ae.a,{style:{marginRight:"auto",marginLeft:"auto",maxWidth:"650px",textAlign:"center"}},i.a.createElement("p",null,"Choose where you want to move the songs, to a new album or an existing one?"),i.a.createElement(y.a,{type:"link",size:"large",onClick:function(){return e.setState({createPlaylistModalVisible:!0})},style:{marginLeft:5,marginTop:13,borderRadius:"500px",maxWidth:"600px",height:"45px",background:"#1DB954",color:"#fff",cursor:"pointer"}},"Create a New Playlist"),i.a.createElement(De.a,{trigger:["click"],overlay:this.selectPlaylistsMenu(),placement:"bottomLeft"},i.a.createElement(y.a,{type:"link",size:"large",onClick:this.selectPlaylist.bind(this),loading:this.state.fetchingPlaylists,style:{marginLeft:5,marginTop:13,borderRadius:"500px",maxWidth:"600px",height:"45px",background:"#1DB954",color:"#fff",cursor:"pointer"}},"Import to Existing Playlist"))),null!==this.state.playlist&&this.importTable(),this.createPlaylistModal())}}]),a}(i.a.Component),ut=be.a.create()(ct),pt=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={isFetching:!1,isFetchingUser:!1,user:null,step:0},e.appleMusicPlaylist=new H({}),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;v()&&(this.setState({isFetchingUser:!0}),C().then((function(t){e.setState({isFetchingUser:!1,user:t.data})})).catch((function(){alert("Couldn't fetch your data. Please refresh the page or try logging in again!")})))}},{key:"step1",value:function(){var e=this;return i.a.createElement(at,{playlist:this.appleMusicPlaylist,onUpload:function(){e.setState({step:1})}})}},{key:"step2",value:function(){var e=this;return i.a.createElement(nt,{playlist:this.appleMusicPlaylist,next:function(){return e.setState({step:2})}})}},{key:"step3",value:function(){var e=this;return i.a.createElement(rt,{playlist:this.appleMusicPlaylist,nextStep:function(){return e.setState({step:3})}})}},{key:"step4",value:function(){return i.a.createElement(ut,{user:this.state.user,playlist:this.appleMusicPlaylist})}},{key:"content",value:function(){switch(this.state.step){default:case 0:return this.step1();case 1:return this.step2();case 2:return this.step3();case 3:return this.step4()}}},{key:"render",value:function(){var e=T.a.Step;return v()?this.state.isFetchingUser?i.a.createElement("p",{style:{textAlign:"center"}},"Fetching your data..."):i.a.createElement("div",null,i.a.createElement("h2",{style:{textAlign:"center",color:"rgb(248, 219)"}},"Yandex"),i.a.createElement("br",null),i.a.createElement(T.a,{current:this.state.step},i.a.createElement(e,{title:"Upload Playlist",description:"Insert the link"}),i.a.createElement(e,{title:"Select Playlist Songs",description:"Select specific songs of the playlist to transfer"}),i.a.createElement(e,{title:"Find Playlist Songs",description:"Automatic search for playlist songs on Spotify"}),i.a.createElement(e,{title:"Import Songs",description:"Import playlist songs to a Spotify playlist"})),i.a.createElement("div",{style:{marginTop:50}},this.content())):i.a.createElement("h2",{style:{textAlign:"center"}},"You need to login first.")}}]),a}(i.a.Component),dt=a(278),mt=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e;e=Object(dt.parse)(this.props.location.hash.slice(1)).access_token,localStorage.setItem("__token",e),this.props.history.push("/")}},{key:"render",value:function(){return i.a.createElement("span",null,"...")}}]),a}(i.a.Component),ht=Object(f.f)(mt),yt=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement(f.c,null,i.a.createElement(f.a,{exact:!0,path:"/",component:A}),i.a.createElement(f.a,{path:"/apple",component:Be}),i.a.createElement(f.a,{path:"/vk",component:et}),i.a.createElement(f.a,{path:"/yandex",component:pt}),i.a.createElement(f.a,{path:"/login-callback",component:ht}))}}]),a}(i.a.Component),ft=(a(631),a(632),a(633),function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement(d.a,null,i.a.createElement(j,null),i.a.createElement("div",{id:"content"},i.a.createElement("div",{className:"container"},i.a.createElement(yt,null))))}}]),a}(n.Component));r.a.render(i.a.createElement(l.a,{basename:"/2spotify"},i.a.createElement(ft,null)),document.getElementById("root"))}},[[365,1,2]]]);
//# sourceMappingURL=main.1cdbadfb.chunk.js.map