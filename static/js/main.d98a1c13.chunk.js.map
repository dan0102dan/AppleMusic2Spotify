{"version":3,"sources":["components/shared/Header.js","constants/RouteConstants.js","components/shared/Footer.js","constants/Constants.js","services/AuthService.js","components/Home.js","services/AppleMusicPlaylist.js","services/ApiService.js","components/transfer-playlist/TransferPlaylistStep1.js","components/transfer-playlist/TransferPlaylistStep2.js","services/UtilsService.js","components/transfer-playlist/TransferPlaylistStep3.js","components/transfer-playlist/TransferPlaylistStep4.js","components/transfer-playlist/TransferPlaylist.js","components/LoginCallback.js","components/Routes.js","App.js","index.js"],"names":["Header","id","theme","mode","defaultSelectedKeys","this","props","location","pathname","style","lineHeight","Item","key","Link","to","React","Component","withRouter","Footer","textAlign","role","aria-label","color","href","API_URL","getLoginUrl","scopes","queryArgs","push","encodeURIComponent","window","protocol","host","join","isLoggedIn","localStorage","getItem","getToken","Home","removeItem","forceUpdate","onClick","logout","bind","loginMessage","axiosCancel","axios","AppleMusicPlaylist","settings","_playlist","changeCallbacks","spotifyStatus","searchFormat","playlist","parsed","Papa","parse","header","errors","length","data","Error","pop","index","track","keys","Object","includes","name","Name","artist","Artist","album","Album","composer","Composer","discCount","discNumber","genre","Genre","trackCount","trackNumber","year","Year","spotifyResults","spotifySelected","indexes","newPlaylist","i","status","output","trackIndex","selectedIndex","findIndex","triggerChange","cb","searchTimeout","setTimeout","_search","placeholders","keyword","replace","slice","value","get","requestId","headers","Authorization","params","type","q","searchKeyword","limit","then","res","tracks","total","items","catch","error","isCancel","finally","clearTimeout","cancel","instance","originalAxios","create","TransferPlaylistStep1","file","reader","FileReader","readAsText","onload","evt","text","target","result","setPlaylist","onUpload","notification","message","description","onerror","marginRight","marginLeft","width","beforeUpload","fileList","TransferPlaylistStep2","state","selectedRowKeys","onSelectChange","setState","filter","next","hasSelected","margin","size","nextStep","disabled","rowSelection","onChange","nextStepButton","columns","title","dataIndex","rowKey","dataSource","pagination","bordered","formatSeconds","seconds","date","Date","setSeconds","toISOString","substr","FormItem","Form","TransferPlaylistStep3","settingsItem","settingsVisible","placement","nextStepDisabled","trigger","content","icon","pause","resume","onConfirm","okText","cancelText","pauseSearch","startSearch","row","trackLabel","getFieldDecorator","form","onSubmit","settingsFormSave","label","help","initialValue","rules","required","placeholder","marginBottom","htmlType","e","preventDefault","validateFields","values","each","option","selectedTrack","spotifyTrack","link","external_urls","spotify","image","images","url","duration","duration_ms","track_number","artistName","artists","artistLink","albumName","albumLink","visible","footer","onCancel","itemLayout","renderItem","item","switchAction","checked","setSpotifySelected","actions","Meta","avatar","src","buttons","render","statusColumn","songSettingsModal","TextArea","Input","TransferPlaylistStep4","userPlaylists","fetchingPlaylists","isCreatingPlaylist","createPlaylistModalVisible","isImporting","alert","event","importSong","map","closable","maskClosable","loading","createPlaylist","validateTrigger","autosize","defaultChecked","err","userId","isPublic","post","user","setSpotifyStatus","songs","getPlaylist","chunks","chunk","songsUri","songIndex","uri","playlistId","uris","showIcon","overlay","selectPlaylistsMenu","selectPlaylist","importTable","createPlaylistModal","TransferPlaylist","isFetching","isFetchingUser","step","appleMusicPlaylist","step1","step2","step3","step4","Step","Steps","current","marginTop","LoginCallback","token","hash","access_token","setItem","history","Routes","Switch","Route","exact","path","component","App","className","ReactDOM","basename","document","getElementById"],"mappings":"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","file":"static/js/main.d98a1c13.chunk.js","sourcesContent":["import React from 'react';\nimport { Layout, Menu } from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\n\nimport * as RouteConstants from '../../constants/RouteConstants';\n\nclass Header extends React.Component {\n  render () {\n    return (\n      <Layout.Header id=\"header\">\n        <h1>Apple Music 2 Spotify</h1>\n        <Menu\n          theme=\"dark\"\n          mode=\"horizontal\"\n          defaultSelectedKeys={[this.props.location.pathname]}\n          style={{lineHeight: '64px'}}\n        >\n          <Menu.Item key={RouteConstants.HOME}>\n            <Link to={RouteConstants.HOME}>Home</Link>\n          </Menu.Item>\n          <Menu.Item key={RouteConstants.TRANSFER_PLAYLIST}>\n            <Link to={RouteConstants.TRANSFER_PLAYLIST}>Transfer Playlist</Link>\n          </Menu.Item>\n        </Menu>\n      </Layout.Header>\n    );\n  }\n}\n\nexport default withRouter(Header);","export const HOME = '/';\nexport const TRANSFER_PLAYLIST = '/transfer-playlist';\nexport const LOGIN_CALLBACK = '/login-callback';","import React from 'react';\nimport { Layout } from 'antd';\n\nexport default class Footer extends React.Component {\n  render () {\n    return (\n      <Layout.Footer style={{textAlign: 'center'}}>\n        Made with <span role=\"img\" aria-label=\"RedHeart\">‚ù§Ô∏è</span> by <a style={{color: 'darkgreen'}} href=\"https://dan0102dan.ru\">dan0102dan</a>\n        <span> and </span>\n        <a href=\"https://github.com/facebook/create-react-app\">creat-react-app</a>\n      </Layout.Footer>\n    );\n  }\n}","export const API_URL = 'https://api.spotify.com';\nexport const SPOTIFY_CLIENT_ID = 'b1a70e47e2fa4e01bc095a4098cbcb0a';","import { SPOTIFY_CLIENT_ID } from '../constants/Constants';\n\nexport const getLoginUrl = (scopes = [\n  'playlist-read-private',\n  'playlist-read-collaborative',\n  'playlist-modify-public',\n  'playlist-modify-private',\n  'user-library-read',\n  'user-library-modify',\n  'user-top-read'\n]) => {\n  let queryArgs = [];\n  queryArgs.push(`client_id=${SPOTIFY_CLIENT_ID}`);\n  queryArgs.push(`response_type=token`);\n  queryArgs.push(`redirect_uri=${encodeURIComponent(`${window.location.protocol}//${window.location.host}/AppleMusic2Spotify/login-callback`)}`);\n  queryArgs.push(`scope=${scopes.join(' ')}`);\n  return `https://accounts.spotify.com/authorize/?${queryArgs.join('&')}`;\n};\n\nexport const isLoggedIn = () => localStorage.getItem('__token') !== null;\n\nexport const getToken = () => localStorage.getItem('__token');\n\nexport const logout = () => localStorage.removeItem('__token');\n\nexport const setToken = (token) => {\n  localStorage.setItem('__token', token);\n};","import React from 'react';\nimport { Button } from 'antd';\nimport { isLoggedIn, getLoginUrl, logout } from '../services/AuthService';\n\nexport default class Home extends React.Component {\n\n  logout () {\n    logout();\n    this.forceUpdate();\n  }\n\n  loginMessage () {\n    return <div>\n      {isLoggedIn()\n        ? <Button onClick={this.logout.bind(this)}>Logout</Button>\n        : <Button href={getLoginUrl()}>Login</Button>}\n    </div>;\n  }\n\n  render () {\n    return (\n      <div>\n        <h2>Apple Music to Spotify <span role=\"img\" aria-label=\"music\">üé∏</span></h2>\n        <p>\n          This tool helps you to transfer your playlists from Apple Mucic to Spotify.\n        </p>\n        {this.loginMessage()}\n      </div>\n    );\n  }\n}","import Papa from 'papaparse';\nimport axios from 'axios';\nimport axiosCancel from 'axios-cancel';\nimport { findIndex } from 'lodash';\n\nimport { API_URL } from '../constants/Constants';\nimport { getToken } from './AuthService';\n\naxiosCancel(axios);\n\nexport default class AppleMusicPlaylist {\n\n  constructor (settings) {\n    this._playlist = [];\n    this.changeCallbacks = [];\n    this.spotifyStatus = null;\n    this.settings = {\n      searchFormat: '{name} {artist}',\n      ...settings\n    };\n  }\n\n  setPlaylist (playlist) {\n    let parsed = Papa.parse(playlist, {\n      header: true\n    });\n    if (parsed.errors.length && !parsed.data.length) {\n      throw new Error('Couldn\\'t parse the playlist.');\n    }\n    parsed.data.pop();\n    for (let index = 0; parsed.data.length > index; index++) {\n      const\n        track = parsed.data[index],\n        keys = Object.keys(track);\n      if (!keys.includes('Name') || !keys.includes('Artist') || !keys.includes('Album')) {\n        throw new Error('Playlist is not a valid apple music playlist.');\n      }\n      this._playlist.push({\n        index,\n        name           : track.Name,\n        artist         : track.Artist,\n        album          : track.Album,\n        composer       : track.Composer,\n        discCount      : track['Disc Count'],\n        discNumber     : track['Disc Number'],\n        genre          : track.Genre,\n        trackCount     : track['Track Count'],\n        trackNumber    : track['Track Number'],\n        year           : track.Year,\n        spotifyStatus  : 'pending',\n        spotifyResults : null,\n        spotifySelected: null\n      });\n    }\n  }\n\n  filter (indexes) {\n    const newPlaylist = [];\n    for (let i = 0; indexes.length > i; i++) {\n      newPlaylist.push(this._playlist[indexes[i]]);\n    }\n    this._playlist = newPlaylist;\n  }\n\n  get playlist () {\n    return this._playlist;\n  }\n\n  getPlaylist (status) {\n    const output = [];\n    for (let index = 0; this._playlist.length > index; index++) {\n      if (this._playlist[index].spotifyStatus === status) {\n        output.push(this._playlist[index]);\n      }\n    }\n    return output;\n  }\n\n  setSpotifySelected (trackIndex, id) {\n    const track = this._playlist[trackIndex];\n    let selectedIndex = findIndex(track.spotifyResults, {id});\n    track.spotifySelected = track.spotifyResults[selectedIndex];\n    this.triggerChange();\n    return this;\n  }\n\n  setSpotifyStatus (status) {\n    this.spotifyStatus = status;\n    this.triggerChange();\n\n    return this;\n  }\n\n  onChange (cb) {\n    this.changeCallbacks.push(cb);\n  }\n\n  triggerChange () {\n    for (let index = 0; this.changeCallbacks.length > index; index++) {\n      this.changeCallbacks[index]();\n    }\n  }\n\n  startSearch () {\n    this.searchTimeout = setTimeout(this._search.bind(this), 1);\n  }\n\n  searchKeyword (track) {\n    const placeholders = ['{name}', '{artist}', '{album}', '{composer}', '{discCount}', '{discNumber}', '{genre}', '{trackCount}', '{trackNumber}', '{year}'];\n    let keyword = this.settings.searchFormat;\n    for (let index = 0; placeholders.length > index; index++) {\n      keyword = keyword.replace(placeholders[index], track[placeholders[index].slice(1, -1)]);\n    }\n    return keyword;\n  }\n\n  option (key, value) {\n    this.settings[key] = value;\n\n    return this;\n  }\n\n  _search () {\n    let track;\n    for (let index = 0; this._playlist.length > index; index++) {\n      if (this._playlist[index].spotifyStatus === 'pending') {\n        track = this._playlist[index];\n        break;\n      }\n    }\n    if (!track) {\n      this.spotifyStatus = 'searchComplete';\n      this.triggerChange();\n      return;\n    }\n    this.spotifyStatus = 'searching';\n    track.spotifyStatus = 'searching';\n    this.triggerChange();\n    axios.get(\n      `${API_URL}/v1/search`,\n      {\n        requestId: 'search',\n        headers  : {\n          Authorization: `Bearer ${getToken()}`\n        },\n        params   : {\n          type : 'track',\n          q    : this.searchKeyword(track),\n          limit: 10\n        }\n      }\n    )\n      .then((res) => {\n        track.spotifyStatus = res.data.tracks.total === 0 ? 'noResult' : 'withResult';\n        track.spotifyResults = res.data.tracks.items;\n        if (res.data.tracks.total)\n          track.spotifySelected = res.data.tracks.items[0];\n        this.searchTimeout = setTimeout(this._search.bind(this), 10);\n      })\n      .catch((error) => {\n        track.spotifyStatus = axios.isCancel(error) ? 'pending' : 'failed';\n      })\n      .finally(() => {\n        this.triggerChange();\n      });\n\n  }\n\n  pauseSearch () {\n    this.spotifyStatus = 'paused';\n    clearTimeout(this.searchTimeout);\n    this.triggerChange();\n    axios.cancel('search');\n  }\n\n}","import originalAxios from 'axios';\n\nimport { API_URL } from '../constants/Constants';\nimport { getToken } from './AuthService';\n\nexport const axios = () => {\n  if (typeof axios.instance === 'undefined') {\n    axios.instance = originalAxios.create({\n      headers: {\n        Authorization: `Bearer ${getToken()}`\n      }\n    });\n  }\n  return axios.instance;\n};\n\nexport const getCurrentUser = () => {\n  return axios().get(\n    `${API_URL}/v1/me`\n  );\n};\n\nexport const search = (search) => {\n  return axios().get(\n    `${API_URL}/v1/search`,\n    {\n      params: search\n    }\n  );\n};\n\nexport const getPlaylists = () => {\n  return axios().get(\n    `${API_URL}/v1/me/playlists`\n  );\n};\n\nexport const createPlaylist = (userId, name, description = '', isPublic = false) => {\n  return axios().post(\n    `${API_URL}/v1/users/${userId}/playlists`,\n    {\n      name,\n      description,\n      'public': isPublic\n    }\n  );\n};\nexport const addTrackToPlaylist = (userId, playlistId, uris) => {\n  return axios().post(\n    `${API_URL}/v1/users/${userId}/playlists/${playlistId}/tracks`,\n    {uris}\n  );\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Upload, Button, Icon, Card, notification } from 'antd';\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nexport default class TransferPlaylistStep1 extends React.Component {\n\n  beforeUpload (file) {\n    let reader = new FileReader();\n    reader.readAsText(file, 'UTF-8');\n    reader.onload = (evt) => {\n      const text = evt.target.result;\n      try {\n        this.props.playlist.setPlaylist(text);\n        this.props.onUpload();\n      }\n      catch (error) {\n        notification.error({\n          message    : 'Error',\n          description: error.message\n        });\n      }\n    };\n    reader.onerror = function (evt) {\n      notification.error({\n        message    : 'Error',\n        description: 'Couldn\\'t read file content. please try again.'\n      });\n    };\n    return false;\n  }\n\n  render () {\n    return <Card style={{marginRight: 'auto', marginLeft: 'auto', width: 650, textAlign: 'center'}}>\n      <p>\n        Select your playlist from iTunes and from \"File\" menu click on \"Library > Export Playlist...\". <br/>\n        Then from \"Format\" menu select \"Unicode Text\" and save the file. <br/>\n        Upload the file from the following field:\n      </p>\n      <Upload beforeUpload={this.beforeUpload.bind(this)} fileList={[]}>\n        <Button>\n          <Icon type=\"upload\"/> Select File\n        </Button>\n      </Upload>\n    </Card>;\n  }\n}\n\nTransferPlaylistStep1.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  onUpload: PropTypes.func.isRequired\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table, Icon, Button } from 'antd';\n\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nexport default class TransferPlaylistStep2 extends React.Component {\n\n  state = {\n    selectedRowKeys: []\n  };\n\n  nextStep () {\n    this.props.playlist.filter(this.state.selectedRowKeys);\n    this.props.next();\n  };\n\n  onSelectChange = (selectedRowKeys) => {\n    this.setState({selectedRowKeys});\n  };\n\n  nextStepButton () {\n    const {selectedRowKeys} = this.state;\n    const hasSelected = selectedRowKeys.length > 0;\n    return <div style={{margin: '16px 0', textAlign: 'right'}}>\n           <span style={{marginRight: 8}}>\n            {hasSelected ? `Selected ${selectedRowKeys.length} items` : ''}\n          </span>\n      <Button\n        type=\"primary\"\n        size={'large'}\n        onClick={this.nextStep.bind(this)}\n        disabled={!hasSelected}\n      >\n        Next Step<Icon type=\"arrow-right\"/>\n      </Button>\n    </div>;\n  }\n\n  render () {\n    const {selectedRowKeys} = this.state;\n    const rowSelection = {\n      selectedRowKeys,\n      onChange: this.onSelectChange,\n    };\n    return (\n      <div>\n        {this.nextStepButton()}\n        <Table\n          rowSelection={rowSelection}\n          columns={[\n            {\n              title    : 'Name',\n              dataIndex: 'name',\n            },\n            {\n              title    : 'Artist',\n              dataIndex: 'artist',\n            },\n            {\n              title    : 'Album',\n              dataIndex: 'album',\n            }\n          ]}\n          rowKey={'index'}\n          dataSource={this.props.playlist.playlist}\n          pagination={false}\n          bordered\n        />\n        {this.nextStepButton()}\n      </div>\n    );\n  }\n}\n\nTransferPlaylistStep2.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  next    : PropTypes.func.isRequired\n};","export const formatSeconds = (seconds) => {\n  const date = new Date(null);\n  date.setSeconds(seconds);\n  return date\n    .toISOString()\n    .substr(11, 8);\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Table,\n  Icon,\n  Button,\n  Tag,\n  Modal,\n  List,\n  Avatar,\n  Switch,\n  Popconfirm,\n  Popover,\n  Form,\n  Input\n} from 'antd';\nimport { each } from 'lodash';\nimport { formatSeconds } from '../../services/UtilsService';\n\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\n\nconst FormItem = Form.Item;\n\nclass TransferPlaylistStep3 extends React.Component {\n\n  state = {\n    settingsItem   : null,\n    settingsVisible: false\n  };\n\n  componentDidMount () {\n    this.props.playlist.onChange(() => {\n      this.forceUpdate();\n    });\n  }\n\n  buttons (placement) {\n    let nextStepDisabled = true;\n    const {playlist} = this.props;\n    const {spotifyStatus} = playlist;\n    for (let index = 0; playlist.playlist.length > index; index++) {\n      if (playlist.playlist[index].spotifyStatus === 'withResult') {\n        nextStepDisabled = false;\n      }\n    }\n    return <div style={{margin: '16px 0', textAlign: 'right'}}>\n      <Popover\n        trigger=\"click\"\n        placement={placement === 'top' ? 'bottomRight' : 'topRight'}\n        content={this.settings()}\n      >\n        <Button\n          size={'large'}\n          style={{marginRight: 7}}\n          icon='setting'\n        >\n          Search Settings\n        </Button>\n      </Popover>\n      <Button\n        size={'large'}\n        icon='pause-circle'\n        style={{marginRight: 7}}\n        disabled={spotifyStatus !== 'searching'}\n        onClick={this.pause.bind(this)}\n      >\n        Pause\n      </Button>\n      <Button\n        size={'large'}\n        icon='play-circle'\n        style={{marginRight: 7}}\n        disabled={spotifyStatus !== 'paused' && spotifyStatus !== null}\n        onClick={this.resume.bind(this)}\n      >\n        Start/Resume\n      </Button>\n\n      {\n        playlist.spotifyStatus !== 'searchComplete' &&\n        <Popconfirm\n          title=\"The search is not complete. Are you sure you want to go to the next step?\"\n          onConfirm={this.nextStep.bind(this)}\n          okText=\"Yes\"\n          placement={placement === 'top' ? 'bottomRight' : 'topRight'}\n          cancelText=\"No\">\n          <Button\n            type=\"primary\"\n            size={'large'}\n            disabled={nextStepDisabled}\n          >\n            Next Step\n            <Icon type=\"arrow-right\"/>\n          </Button>\n        </Popconfirm>\n      }\n      {\n        playlist.spotifyStatus === 'searchComplete' &&\n        <Button\n          type=\"primary\"\n          size={'large'}\n          onClick={this.nextStep.bind(this)}\n          disabled={nextStepDisabled}\n        >\n          Next Step<Icon type=\"arrow-right\"/>\n        </Button>\n      }\n\n    </div>;\n  }\n\n  nextStep () {\n    this.props.nextStep();\n  }\n\n  pause () {\n    this.props.playlist.pauseSearch();\n  }\n\n  resume () {\n    this.props.playlist.startSearch();\n  }\n\n  trackLabel (track) {\n    const status = track.spotifyStatus;\n    switch (status) {\n      default:\n      case 'pending':\n        return <Tag color=\"#7f8c8d\">Pending</Tag>;\n      case 'failed':\n        return <Tag color=\"#e74c3c\">Failed</Tag>;\n      case 'searching':\n        return <Tag color=\"#8e44ad\">Searching</Tag>;\n      case 'noResult':\n        return <Tag color=\"#f1c40f\">No Result</Tag>;\n      case 'withResult':\n        return <Tag color=\"#27ae60\">Found</Tag>;\n    }\n  }\n\n  statusColumn (text, row) {\n    const status = row.spotifyStatus;\n    return <div>\n      {this.trackLabel(row)}\n      {\n        status === 'withResult' &&\n        <Button\n          size={'small'}\n          onClick={() => {\n            this.setState({settingsItem: row.index, settingsVisible: true});\n          }}><Icon type=\"setting\"/></Button>}\n    </div>;\n  }\n\n  settings () {\n    const {getFieldDecorator} = this.props.form;\n    return (\n      <Form\n        style={{width: 300}}\n        onSubmit={this.settingsFormSave.bind(this)}\n      >\n        <FormItem\n          label='Search Format'\n          help=\"Placeholders: {name}, {artist}, {album}, {composer}, {discCount}, {discNumber}, {genre}, {trackCount}, {trackNumber} and {year}\"\n        >\n          {getFieldDecorator('searchFormat',\n            {\n              initialValue: this.props.playlist.settings.searchFormat,\n              rules       : [{required: true, message: 'Please fill the field.'}],\n            })(\n            <Input placeholder=\"Search Format\"/>\n          )}\n        </FormItem>\n        <FormItem style={{marginBottom: 0}}>\n          <Button\n            type=\"primary\"\n            style={{width: '100%'}}\n            htmlType=\"submit\"\n            icon='smile-o'\n          >\n            Done\n          </Button>\n        </FormItem>\n      </Form>\n    );\n  }\n\n  settingsFormSave (e) {\n    e.preventDefault();\n    const {props} = this;\n    props.form.validateFields((errors, values) => {\n      if (!errors) {\n        each(values, (value, key) => {\n          props.playlist.option(key, value);\n        });\n      }\n    });\n  }\n\n  songSettingsModal () {\n    const {playlist} = this.props;\n    const {settingsItem} = this.state;\n    let track, data = [], selectedTrack;\n    if (this.state.settingsItem !== null) {\n      track = playlist.playlist[settingsItem];\n      selectedTrack = playlist.playlist[settingsItem].spotifySelected;\n      for (let index = 0; track.spotifyResults.length > index; index++) {\n        let spotifyTrack = track.spotifyResults[index];\n        data.push({\n          index,\n          id         : spotifyTrack.id,\n          name       : spotifyTrack.name,\n          link       : spotifyTrack.external_urls.spotify,\n          image      : spotifyTrack.album.images[1].url,\n          duration   : spotifyTrack.duration_ms / 1000,\n          trackNumber: spotifyTrack.track_number,\n          artistName : spotifyTrack.artists[0].name,\n          artistLink : spotifyTrack.artists[0].external_urls.spotify,\n          albumName  : spotifyTrack.album.name,\n          albumLink  : spotifyTrack.album.external_urls.spotify,\n          track      : spotifyTrack\n        });\n      }\n    }\n    return <Modal\n      title=\"Song Settings\"\n      visible={this.state.settingsVisible}\n      footer={null}\n      onCancel={() => {\n        this.setState({settingsVisible: false});\n        setTimeout(() => this.setState({settingsItem: null}), 200);\n      }}\n    >\n      <List\n        itemLayout=\"horizontal\"\n        dataSource={data}\n        renderItem={item => {\n          const switchAction = <Switch\n            checked={selectedTrack.id === item.id}\n            onChange={() => {\n              playlist.setSpotifySelected(settingsItem, item.id);\n            }}/>;\n          return <List.Item actions={[switchAction]}>\n            <List.Item.Meta\n              avatar={<Avatar src={item.image} size=\"large\"/>}\n              description={<p>Album: <a href={item.albumLink}>{item.albumName}</a> - {formatSeconds(item.duration)}</p>}\n              title={<a href={item.link} target=\"_blank\">{item.artistName} - {item.name}</a>}\n            />\n          </List.Item>;\n        }}\n      />\n    </Modal>;\n  }\n\n  render () {\n    return <div>\n      {this.buttons('top')}\n      <Table\n        rowKey=\"index\"\n        columns={[\n          {\n            title    : 'Status',\n            dataIndex: 'status',\n            width    : '13%',\n            render   : this.statusColumn.bind(this)\n          },\n          {\n            title    : 'Name',\n            dataIndex: 'name',\n          },\n          {\n            title    : 'Artist',\n            dataIndex: 'artist',\n          },\n          {\n            title    : 'Album',\n            dataIndex: 'album',\n          }\n        ]}\n        dataSource={this.props.playlist.playlist}\n        pagination={false}\n        bordered\n      />\n      {this.buttons('bottom')}\n      {this.songSettingsModal()}\n    </div>;\n  }\n}\n\nTransferPlaylistStep3.propTypes = {\n  playlist: PropTypes.instanceOf(AppleMusicPlaylist).isRequired,\n  nextStep: PropTypes.func.isRequired\n};\n\nexport default Form.create()(TransferPlaylistStep3);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { chunk } from 'lodash';\nimport { Button, Card, Dropdown, Menu, Form, Input, Modal, Checkbox, Table, Alert } from 'antd';\n\nimport { getPlaylists, createPlaylist, addTrackToPlaylist } from '../../services/ApiService';\n\nconst FormItem = Form.Item;\nconst {TextArea} = Input;\n\nclass TransferPlaylistStep4 extends React.Component {\n\n  state = {\n    playlist                  : null,\n    userPlaylists             : null,\n    fetchingPlaylists         : false,\n    isCreatingPlaylist        : false,\n    createPlaylistModalVisible: false,\n    isImporting               : false\n  };\n\n  componentDidMount () {\n    this.props.playlist.onChange(() => {\n      this.forceUpdate();\n    });\n  }\n\n  selectPlaylist () {\n    if (this.state.userPlaylists !== null) {\n      return;\n    }\n    this.setState({fetchingPlaylists: true});\n    getPlaylists()\n      .then((res) => {\n        this.setState({\n          fetchingPlaylists: false,\n          userPlaylists    : res.data\n        });\n      })\n      .catch(() => {\n        alert('Couldn\\'t get playlists. Please try again.');\n      });\n  }\n\n  selectPlaylistsMenu () {\n    return <Menu onClick={(event) => {\n      this.setState({\n        playlist: event.item.props.playlist\n      }, () => {\n        this.importSong();\n      });\n    }}>\n      {this.state.userPlaylists === null ? null : this.state.userPlaylists.items.map((playlist, index) => {\n        return <Menu.Item key={index} playlist={playlist}>\n          {playlist.name}\n        </Menu.Item>;\n      })}\n    </Menu>;\n  }\n\n  createPlaylistModal () {\n    const {getFieldDecorator} = this.props.form;\n    return <Modal\n      title=\"Create Playlist\"\n      closable={false}\n      maskClosable={true}\n      visible={this.state.createPlaylistModalVisible}\n      onCancel={() => this.setState({createPlaylistModalVisible: false})}\n      footer={[\n        <Button key=\"back\" onClick={() => this.setState({createPlaylistModalVisible: false})}>Cancel</Button>,\n        <Button key=\"submit\" type=\"primary\" loading={this.state.isCreatingPlaylist} onClick={this.createPlaylist.bind(this)}>\n          Create\n        </Button>,\n      ]}\n    >\n      <Form onSubmit={this.createPlaylist.bind(this)}>\n        <FormItem>\n          {getFieldDecorator('name', {\n            validateTrigger: 'onBlur',\n            rules          : [\n              {\n                required: true,\n                message : 'Please enter a name'\n              }\n            ]\n          })(\n            <Input placeholder=\"Playlist Name\"/>\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('description', {\n            initialValue: ''\n          })(\n            <TextArea autosize={true} placeholder=\"Playlist Description\"/>\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('isPublic', {\n            initialValue: true\n          })(\n            <Checkbox defaultChecked={true}>This is a public playlist!</Checkbox>\n          )}\n        </FormItem>\n      </Form>\n    </Modal>;\n  }\n\n  createPlaylist (e) {\n    if (e)\n      e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        this.setState({\n          isCreatingPlaylist: true\n        });\n        createPlaylist(\n          this.props.user.id,\n          values.name,\n          values.description,\n          values.isPublic\n        )\n          .then((res) => {\n            this.setState({\n              isCreatingPlaylist        : false,\n              createPlaylistModalVisible: false,\n              playlist                  : res.data\n            });\n            this.importSong();\n          })\n          .catch(() => {\n            alert(`Couldn't create the playlist. Please refresh the page.`);\n          });\n      }\n    });\n\n  }\n\n  async importSong () {\n    this.props.playlist.setSpotifyStatus('importing');\n    const songs = this.props.playlist.getPlaylist('withResult');\n    const chunks = chunk(songs, 100);\n    for (let index = 0; chunks.length > index; index++) {\n      let songsUri = [];\n      for (let songIndex = 0; chunks[index].length > songIndex; songIndex++) {\n        songsUri.push(chunks[index][songIndex].spotifySelected.uri);\n      }\n      await addTrackToPlaylist(this.props.user.id, this.state.playlist.id, songsUri);\n    }\n    this.props.playlist.setSpotifyStatus('done');\n  }\n\n  importTable () {\n    return (\n      <Table\n        loading={this.state.isImporting}\n        bordered={true}\n        rowKey=\"index\"\n        columns={[\n          {\n            title    : 'Name',\n            dataIndex: 'name',\n          },\n          {\n            title    : 'Artist',\n            dataIndex: 'artist',\n          },\n          {\n            title    : 'Album',\n            dataIndex: 'album',\n          }\n        ]}\n        dataSource={this.props.playlist.getPlaylist('withResult')}\n        pagination={false}/>\n    );\n  }\n\n  render () {\n    const {playlist} = this.props;\n    if (playlist.spotifyStatus === 'done') {\n      return <Alert\n        message=\"All Songs Imported\"\n        description={<div>\n          All songs imported. <br/>\n          <a href={this.state.playlist.external_urls.spotify}>{this.state.playlist.name}</a>\n        </div>}\n        type=\"success\"\n        showIcon\n      />;\n    }\n    return <div>\n      {this.state.playlist === null &&\n      <Card style={{marginRight: 'auto', marginLeft: 'auto', width: 650, textAlign: 'center'}}>\n        <Button\n          type=\"primary\"\n          size=\"large\"\n          onClick={() => this.setState({createPlaylistModalVisible: true})}\n          style={{marginRight: 5}}>\n          Create a New Playlist\n        </Button>\n        <Dropdown trigger={['click']} overlay={this.selectPlaylistsMenu()} placement=\"bottomLeft\">\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            onClick={this.selectPlaylist.bind(this)}\n            loading={this.state.fetchingPlaylists}\n            style={{marginLeft: 5}}>\n            Import to Existing Playlist\n          </Button>\n        </Dropdown>\n      </Card>}\n      {this.state.playlist !== null && this.importTable()}\n\n      {this.createPlaylistModal()}\n    </div>;\n  }\n}\n\nTransferPlaylistStep4.propTypes = {\n  user    : PropTypes.object.isRequired,\n  playlist: PropTypes.object.isRequired\n};\n\nexport default Form.create()(TransferPlaylistStep4);","import React from 'react';\nimport { Steps } from 'antd';\n\nimport { isLoggedIn } from '../../services/AuthService';\nimport AppleMusicPlaylist from '../../services/AppleMusicPlaylist';\nimport { getCurrentUser } from '../../services/ApiService';\nimport TransferPlaylistStep1 from './TransferPlaylistStep1';\nimport TransferPlaylistStep2 from './TransferPlaylistStep2';\nimport TransferPlaylistStep3 from './TransferPlaylistStep3';\nimport TransferPlaylistStep4 from './TransferPlaylistStep4';\n\nexport default class TransferPlaylist extends React.Component {\n\n  state = {\n    isFetching    : false,\n    isFetchingUser: false,\n    user          : null,\n    step          : 0\n  };\n\n  constructor () {\n    super();\n    this.appleMusicPlaylist = new AppleMusicPlaylist({});\n  }\n\n  componentWillMount () {\n    if (isLoggedIn()) {\n      this.setState({\n        isFetchingUser: true\n      });\n      getCurrentUser()\n        .then((res) => {\n          this.setState({\n            isFetchingUser: false,\n            user          : res.data\n          });\n        })\n        .catch(() => {\n          alert(`Couldn't fetch your data. Please refresh the page or try logging in again!`);\n        });\n    }\n  }\n\n  step1 () {\n    return <TransferPlaylistStep1\n      playlist={this.appleMusicPlaylist}\n      onUpload={() => {\n        this.setState({\n          step: 1\n        });\n      }}\n    />;\n  }\n\n  step2 () {\n    return <TransferPlaylistStep2\n      playlist={this.appleMusicPlaylist}\n      next={() => this.setState({step: 2})}\n    />;\n  }\n\n  step3 () {\n    return <TransferPlaylistStep3\n      playlist={this.appleMusicPlaylist}\n      nextStep={() => this.setState({step: 3})}\n    />;\n  }\n\n  step4 () {\n    return <TransferPlaylistStep4\n      user={this.state.user}\n      playlist={this.appleMusicPlaylist}\n    />;\n  }\n\n  content () {\n    switch (this.state.step) {\n      default:\n      case 0:\n        return this.step1();\n      case 1:\n        return this.step2();\n      case 2:\n        return this.step3();\n      case 3:\n        return this.step4();\n    }\n  }\n\n  render () {\n    const Step = Steps.Step;\n    if (!isLoggedIn()) {\n      return <p>To use this page, you need to log in.</p>;\n    }\n    if (this.state.isFetchingUser) {\n      return <p>Fetching your data...</p>;\n    }\n    return (\n      <div>\n        <h2>Transfer Playlist</h2><br/>\n        <Steps current={this.state.step}>\n          <Step title=\"Upload Playlist\" description=\"Upload playlist file\"/>\n          <Step title=\"Select Playlist Songs\" description=\"Select specific songs of the playlist to transfer\"/>\n          <Step title=\"Find Playlist Songs\" description=\"Search for playlist songs on Spotify\"/>\n          <Step title=\"Import Songs\" description=\"Import playlist songs to a Spotify playlist\"/>\n        </Steps>\n        <div style={{marginTop: 50}}>\n          {this.content()}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { parse } from 'qs';\n\nimport { setToken } from '../services/AuthService';\n\nclass LoginCallback extends React.Component {\n\n  componentDidMount () {\n    setToken(\n      parse(this.props.location.hash.slice(1)).access_token\n    );\n    this.props.history.push('/');\n  }\n\n  render () {\n    return (\n      <span>...</span>\n    );\n  }\n}\n\nexport default withRouter(LoginCallback);","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport * as RouteConstants from '../constants/RouteConstants';\n\nimport Home from './Home';\nimport TransferPlaylist from './transfer-playlist/TransferPlaylist';\nimport LoginCallback from './LoginCallback';\n\nexport default class Routes extends React.Component {\n  render () {\n    return (\n      <Switch>\n        <Route exact path={RouteConstants.HOME} component={Home}/>\n        <Route path={RouteConstants.TRANSFER_PLAYLIST} component={TransferPlaylist}/>\n        <Route path={RouteConstants.LOGIN_CALLBACK} component={LoginCallback}/>\n      </Switch>\n    );\n  }\n}","import React, { Component } from 'react';\nimport { Layout } from 'antd';\n\nimport Header from './components/shared/Header';\nimport Footer from './components/shared/Footer';\nimport Routes from './components/Routes';\n\nimport 'antd/dist/antd.css';\nimport 'sanitize.css';\nimport './styles.css';\n\nclass App extends Component {\n  render () {\n    return (\n      <Layout>\n        <Header/>\n        <div id='content'>\n          <div className='container'>\n            <Routes/>\n          </div>\n        </div>\n        <Footer/>\n      </Layout>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <Router basename={'/applemusic2spotify'}>\n    <App/>\n  </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}